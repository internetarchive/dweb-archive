{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/archive.js","webpack:///./node_modules/ia-design-system/public/scripts/index.js","webpack:///./src/js/setUpCopyableTexts.js","webpack:///./node_modules/clipboard/dist/clipboard.js","webpack:///./src/less/archive.less"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","window","jQuery","log","location","host","substr","console","AJS","elm","in_show","parents","id","chan","show","length","opened","parent","find","toggle","attr","text","concat","div","url","href","encodeURIComponent","htm","append","isTouchDevice","addClass","logoText","on","removeClass","evt","xs","hat_open","hasClass","navlink","this","mt","target","currentTarget","isnow","hide","collapse","tophat_dont_count_first_open","archive_analytics","send_ping","kind","ec","ea","el","pathname","cache_bust","Math","random","one","setTimeout","click","has","document","event","$e","is","DocumentTouch","fn","tooltip","$sharedown","$wrapdark","wrapdark_watcher_ptr","setInterval","wrapdark_watcher","wrapdarkHT","offset","top","innerHeight","parseInt","css","height","clearInterval","mutedNOW","cookie","emulator","setMute","player","jwplayer","volnow","getVolume","mute_click_prior_volume","setVolume","path","expires","game","toString","identifier","IALoader","scale","parseFloat","indexOf","unmute","mute","theatre_controls_position","clearTimeout","theatre_controls_position_throttler","prepend","appendTo","fadeOut","start","hasCustomCSS","EM","JSMESS","DOSBOX","canvas","webkitRequestFullScreen","mozRequestFullScreen","requestFullScreen","Module","addEventListener","fullScreenChangeHandler","$selectorIn","pegTop","widthIn","heightIn","$selector","video","width","right_gutter_width","round","visibility","right","max","theatresize","$textyiframe","changeBgColor","$contentDom","contentDocument","bgColorInterval","data","booksize_controls_hidden","booksize_controls","bookSizeInterval","$iframe","$iframeDOM","$book","$navbar","overflow","resizer","maxH","maxW","outerWidth","WH","min","popcorn_throttler","onChange","theatresize_maxheight","minHeight","targetHeight","theatresize_throttler","selector","enableThreatreChange","$carousel","imagePromises","map","img","promise","Deferred","result","complete","resolve","naturalHeight","when","apply","_toConsumableArray","then","currHeight","maxImageHeight","arguments","trigger","undefined","jw","getState","toLowerCase","pause","lnk","switchToA2Z","props","selectorID","contents","React","createElement","className","type","data-dismiss","aria-hidden","ReactDOM","render","modal","MORFreact","modal_go","title","headerClass","ignore_lnk","auto_remove","body","val","alert","cleaned","replace","opts","options","container","content","html","placement","popover","first","C3","C234","availWidth","C2","C4","max-width","cookie_range","prefer","showdetails","checked","defaults","btn","$body","to","domain","toggleClass","tiler","inTab","trim","tmp","ikind","each","k","row","mouseover","e","mouseout","selectorIn","noRecall","prop","$parentRow","tilerPREV","winW","pad","nPerRow","gutter","tileWidth","TILE_WIDTH","unsourced","firstLeft","parent_hover","padding-left","padding-right","$facets","facetsWidth","TILE_WIDTH_SMALL","floor","extra","nImgZeroHeight","nImgZeroHeightAry","maxtop","tops","0","lefts","v","src","onError","removeAttr","colPREV","not","idx","$val","$valHT","col","colTEST","cmpTEST","left","push","join","tiler_throttler","idsel","$sel","$new","$now","ikind_mobile_change_ignore_next","$selopt","$ikinds","filter","pageType","pushState","history","tabPick","hash2arg","tab","arg","tabby_no_pushState_next_click","locNOW","locNEW","protocol","grafs","alsoFoundElement","$window","throttledListener","threshhold","context","last","deferTimeout","_len","args","Array","_key","now","Date","callFn","throttle","alsoFound","topOffset","windowHeight","lazyLoadStart","scrollTop","LoadingMessage","message","doWhenScrolledToRelatedSection","off","scroll","getRelatedItems","response","RelatedItemSection","dataHash","tilebars","catch","error","ErrorMessage","errorMsg","size","Promise","reject","apiUrl","param","hashData","apiError","items","hits","Error","forEach","item","itemSource","_source","singleHash","_id","numReviews","lendingEnabled","lendingAvailable","loginRequired","lendClass","favorite","creator","downloads","mediatype","txt","charAt","toUpperCase","match","xer","$item","idX","listkind","remove","next","ids","toArray","reduce","a","b","$form","submit","head_img_dragdrop_setup_done","head_img_replaceable","file_picked","stopPropagation","preventDefault","over","x","pageX","originalEvent","y","pageY","_e$offset","outerHeight","_e$offset2","cancelFile","files","_evt$target$files","_slicedToArray","file2post","previewFile","dataTransfer","_evt$dataTransfer$fil","fail","XMLHttpRequest","badFile","xhr","upload","open","setRequestHeader","send","reply","responseText","mat","task_id","stalker_ptr","ajax","dataType","success","xml","green","blue","red","nWait","uploadFile","w1","h1","w2","h2","ios","FileReader","reader","onload","im","Image","readAsDataURL","pageinfo","urlstart","multi_year","last_year","year","str","lastyearmonth","pages","split","month","day","yearmonth","skip_day","monthName","page","pnum","j","$grafs1","$grafs2","setUpTopRegionsTable","slideDown","slideUp","format","$formatGroup","theArgName","try_full","sArgs","search","slice","unescape","mousetimer","fadeIn","mouseleave","newtop","check","more_searching","urlIn","page_now","$more_search","pageKey","page_map","urlreplace","replaceState","addNotes","addingNotesKind","more_search_throttler","send_scroll_fetch_event","_arr","_i2","embid","$embid","embtxt","class","position","padding","font-size","bestHT","_ref","_ref$prepend","_ref$selector","_ref$title","_ref$body","conf","confIn","feedback_only","_modal_add","exiting","submitted","postdata","serialize","post","exitFN","bookmarkRes","center","auto_close","login","shown","follow_link_on_dismiss","htmIn","keyvals","res","isFavoriteSuccessful","$favModal","failMessage","obj","nStr","x1","x2","rgx","test","axis","toFixed","suffixFmt","offsetHeight","scrollHeight","callback","plotters","cfgIn","fmt_fn","pts","many","cfg","xaxis","color","dark","yaxis","barWidth","dayBarsNoPoints","series","bars","fill","points","grid","borderColor","hoverable","backgroundColor","tip","GraphPriorIndex","ary","noLabel","label","selid","plot","pos","dataIndex","datapoint","$graf","pegTo","pegToVal","ColorThief","welcome_recolored","palette","getPalette","dominantColorRGB","avgVal","background-color","element","code","keyCode","which","multiValSplitChar","autocomplete","minLength","source","request","ui","term","pop","focus","select","terms","addNoteHTM","$htm","prev","$note","action","$parent","$origNote","TV","TV2","unplay","thumbzillas","startend","TV3","CLIP_SEC_MAX2","winH","w","h","WAYBACK","REDIRECT_URL","REDIRECT_SEARCH","search_or_calendar","query","$input","fireAnalyticsTrackingEvent","typeahead","cache","done","process","hosts","isUrl","excluded","display_name","data2","matcher","displayText","autoSelect","delay","fitToElement","minLenght","change","current","params","scrollbars","resizable","toolbar","directories","menubar","status","keys","paramPairs","_ref2","children","onClick","openPopup","root","querySelector","CreativeCommonsLicenseLink","dataset","licenseName","licenseSelected","setUpSearchForm","formNode","form","searchBar","searchOptions","keepOpenWhenChanged","formChanged","handleFocusChange","targetElement","contains","waybackMachineSearchUrl","elements","checkedInput","searchInput","sinValue","searchValue","relatedTarget","index","node","iframe","hasAttribute","fragment","pathString","newFragment","fragmentRegex","hash","updateUrl","from","querySelectorAll","accordion","handleToggle","detailsEls","selectedDetails","details","animate","setAttribute","link","is_advanced_TV_search","adv","mapping","ymd","toISOString","ajaxSetup","getScript","TVSearch","getJSON","proPick","hostname","category","actionHandler","attributeName","categoryAction","categoryActionParts","_ref3$dataHash","_ref3","aria-label","data-id","data-mediatype","data-year","tabIndex","data-event-click-tracking","alt","_ref4$caption","_ref4","caption","_ref4$captionClass","captionClass","_ref4$counts","counts","scope","count","state","country","formattedName","formattedCount","_ref5$message","_ref5","_ref6","originalMessageText","apiOptions","uaKinds","days","limit","StatsApiClient","getGeoCounts","RegionsTable","navigator","userAgent","cgi_args","Timegraf","leftTS","riteTS","minDate","maxDate","realGraphWidth","GRAPH_WIDTH","GRAPH_PADDING","maxSlide","getTime","csMinTS","rite","$sliderdiv","GRAPH_HEIGHT","zIndex","slider","range","values","slide","ts","d1","d2","setDate","getDate","datepicker","formatDate","hideL","hideR","foff","toff","pinkme","stop","adjust","timechanged","become","q","pinkL","rect","data-title","data-toggle","data-placement","onedayspan","from2","to2","StatsRegion","_ref7","_classCallCheck","_createClass","GeoCount","_ref8","addCommas","createGeoCountFromApiData","sum_count_value","geo_country","geo_state","_ref10","_ref10$days","_ref10$limit","_ref10$uaKinds","apiBaseUrl","_ref9$uaKinds","counts_geo","RangeError","uaKind","countsMap","countData","ua_kind","mapKey","createCombinedGeoCountsFromApiData","sort","count1","count2","createClass","displayName","DEFAULT_LINK_TEXT","defaultProps","getInitialState","linkText","oldLicenseName","componentWillReceiveProps","newProps","setState","removeLicense","removeRetainLicenseInput","formItem","getElementById","parentNode","removeChild","wasLicensedChanged","getLicenseChangeMessage","PopupLink","FACETS_PER_PAGE","mounted","hdr","getFacets","self","ret","refs","componentDidMount","pageClick","submitClick","morf","_this","loading","option","handleClick","ref","paging","npages","ceil","loadnote","style","font-style","margin","text-align","date","toUTCString","setTime","secure","cookieValue","cookies","substring","decodeURIComponent","myheight","scrollLeft","vpW","innerWidth","vpH","display","makeMouseElementAccessible","setUpActionTracking","nav_tophat_setup","nav_tophat_wb_setup","setupPopupLink","setUpCreativeCommonsLicenseLink","setUpSearchForms","setUpBookReaderIframe","setUpAccordions","setUpRelatedItems","_setUpCopyableTexts2","default","archive_setup","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","err","return","footer","./src/scripts/index.js","./src/styles/index.less","_clipboard","showStatusMessage","copyableText","output","appendChild","textContent","setUpCopyableText","button","createButton","clipboard","copyableTexts","ClipboardJS","isSupported","parentElement","getAttribute","factory","_typeof","constructor","defineProperties","descriptor","configurable","writable","Constructor","protoProps","staticProps","_clipboardAction2","_interopRequireDefault","_tinyEmitter2","_goodListener2","Clipboard","_Emitter","instance","TypeError","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","resolveOptions","listenClick","subClass","superClass","setPrototypeOf","_inherits","defaultAction","defaultTarget","defaultText","_this2","listener","delegateTarget","clipboardAction","emitter","getAttributeValue","destroy","actions","support","queryCommandSupported","suffix","attribute","_select","_select2","ClipboardAction","initSelection","selectedText","selectFake","selectTarget","isRTL","documentElement","removeFake","fakeHandlerCallback","fakeHandler","fakeElem","fontSize","border","yPosition","pageYOffset","copyText","removeEventListener","succeeded","execCommand","handleResult","emit","clearSelection","getSelection","removeAllRanges","set","_action","nodeType","_target","nodeName","isReadOnly","setSelectionRange","removeAttribute","selection","createRange","selectNodeContents","addRange","E","ctx","once","_","evtArr","len","evts","liveEvents","delegate","string","listenNode","nodeList","listenNodeList","listenSelector","HTMLElement","String","closest","_delegate","useCapture","listenerFn","DOCUMENT_NODE_TYPE","Element","matches","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],"mappings":"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","file":"archive.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// Not using anything from the design system right now, imported as a proof of concept.\n// eslint-disable-next-line no-unused-vars\nimport IaDesignSystem from 'ia-design-system'\n\nimport setUpCopyableTexts from './setUpCopyableTexts'\n\n// Local binding in case of conflicts in global scope\nconst $ = window.jQuery\n\n// convenient, no?  Stateless function, global to all Play objects\n//   eslint-disable-next-line  no-console\nconst log = (location.host.substr(0, 4) !== 'www-' ? () => {} : console.log.bind(console))\n\n/**\n * Executes a function no more than once within the specified time threshhold\n *\n * Pass its return value into high-frequency event listeners\n * like scroll/resize to improve performance.\n *\n * @param {Function} fn\n * @param {Number}   threshhold - in milliseconds\n * @param {*}        context    - will be bound to fn as its \"this\" value\n * @return {Function} the throttled version of the original function\n */\nfunction throttle(fn, threshhold = 250, context = undefined) {\n  let last\n  let deferTimeout\n\n  return (...args) => {\n    // Convert to a Number\n    const now = +new Date()\n\n    /**\n     * Calls the fn function and updates the last time\n     */\n    function callFn() {\n      last = now\n      fn.apply(context, args)\n    }\n\n    if (last && now < last + threshhold) {\n      clearTimeout(deferTimeout)\n      deferTimeout = setTimeout(callFn, threshhold)\n    } else {\n      callFn()\n    }\n  }\n}\n\n/**\n * Replaces a BookReader fragment string in a URL path with a new fragment,\n * or adds the path string to the end of the URL if it's not set\n *\n * NOTE: BookReader \"fragments\" are not necessarily URL hash fragments,\n * though they may be stored in the hash.\n *\n * @param {String} pathString\n * @param {String} newFragment\n * @returns {String}\n */\nfunction replaceBookReaderFragment(pathString, newFragment) {\n  // See http://openlibrary.org/dev/docs/bookurls\n  const fragmentRegex = /(\\/((page|mode|search)\\/[^/?$]+))+\\/?(?=\\?|$)/g\n\n  if (pathString.match(fragmentRegex))\n    return pathString.replace(fragmentRegex, `/${newFragment}`)\n\n  return `${pathString}/${newFragment}`.replace(/\\/+/g, '/')\n}\n\n// class memnonic: Archive JS\nclass AJS {\n  /* global  archive_analytics  jwplayer */\n  /* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_modal_add\"] }] */\n\n\n  static TILE_WIDTH       = 180 // NOTE: needs to stay in sync w/ archive.less\n  static TILE_WIDTH_SMALL = 150 // NOTE: needs to stay in sync w/ archive.less\n\n  static ios = (navigator.userAgent.indexOf('iPhone') > 0  ||\n                navigator.userAgent.indexOf('iPad') > 0  ||\n                navigator.userAgent.indexOf('iPod') > 0)\n  static page_map = {}\n  static cgi_args = {}\n\n  static tvAD(elm) {\n    const in_show = $(elm).parents('.shows')\n    let id\n    let chan\n    let show\n    if (in_show.length) {\n      // see if we've already gotten and displayed the \"Air date\" section...\n      const opened = $(elm).parent().find('.shows')\n      if (opened.length) {\n        // ... yes, simply close/open it\n        opened.toggle()\n        return false\n      }\n      chan = in_show.attr('data-chan')\n      show = $(elm).text()\n    } else {\n      chan = $(elm).text()\n      id = 'menu-chan-'.concat(chan)\n      const div = $(`#${id}`)\n      if (div.length) {\n        div.toggle()\n        return false\n      }\n    }\n\n    let url = `${location.href}?channel=${chan}`\n    if (in_show.length)\n      url += '&program='.concat(encodeURIComponent(show))\n    log(url)\n\n    $.get(url, (htm) => {\n      if (in_show.length) {\n        $(elm).parent()\n          .append(`<div data-chan=\"${chan}\" class=\"shows\"><h5>Air date</h5><div>${htm}</div></div>`)\n      } else {\n        $(elm).parent()\n          .append(`<div id=\"${id}\" data-chan=\"${chan}\" class=\"shows\"><h4>Show</h4><div>${htm}</div></div>`)\n      }\n    })\n\n    return false\n  }\n\n\n  static nav_tophat_setup() {\n    if (!$('#nav-tophat').length)\n      return\n\n    if (AJS.isTouchDevice())\n      $('body').addClass('touch')\n    else\n      AJS.logoText()\n\n\n    $('#nav-tophat')\n      .on('show.bs.collapse', () => $('#navwrap1').addClass('hatted'))\n      .on('hide.bs.collapse', () => $('#navwrap1').removeClass('hatted'))\n\n\n    $('.navbar a.navia-link').on('click', function navhat_click(evt) {\n      // are we in \"mobile nav / xs width\" mode?\n      const xs = !$('#nav-tophat-helper:visible').length\n      const hat_open = $('#nav-tophat').hasClass('in')\n      const navlink = this\n\n      // determine mediatype from either: (1) user hit text or (2) user hit icon\n      const mt = ($(evt.target).attr('data-top-kind')  ||\n                  $(evt.currentTarget).attr('data-top-kind'))\n\n      const isnow = $('.navbar .dropdown-ia.hatted a').attr('data-top-kind')\n\n      if (!(xs  &&  hat_open  &&  isnow !== mt)) {\n        // show the links for mediatype clicked\n        $('.toprow').hide()\n        $(`.toprow.${mt}`).show()\n      }\n\n\n      if (!hat_open) {\n        $('#nav-tophat').collapse('show') // .. top hat is *not* open.  clicked, so open tophat\n\n        if (AJS.tophat_dont_count_first_open) {\n          delete AJS.tophat_dont_count_first_open\n        } else if (typeof archive_analytics !== 'undefined') {\n          // log that a user has opened the nav tophat, yayz\n          archive_analytics.send_ping({\n            kind: 'event',\n            ec: 'page_action',\n            ea: 'nav_tophat_galactica',\n            el: location.pathname,\n            cache_bust: Math.random(),\n          })\n        }\n      }\n\n\n      if (typeof isnow !== 'undefined')\n        log('isnow', isnow)\n      log('shouldB', mt)\n\n      if (isnow === mt) {\n        // 2nd click on same mediatype dropdown -- close tophat!\n        $('#nav-tophat').collapse('hide')\n        return false\n      }\n\n      if (xs  &&  hat_open  &&  isnow !== mt) {\n        // Mobile/xs nav and user has clicked on *another* nav/MT icon.\n        // So we want to (animate) close the tophat, and when closed,\n        // reopen (animate) to the right open tophat -- this is because\n        // mobile/xs makes the tophat heights much more arbitrary\n        // and it looks weird hard jumping to other open area at another height!\n        $('#nav-tophat').one('hidden.bs.collapse', () => {\n          setTimeout(() => $(navlink).click(), 100)\n        })\n        $('#nav-tophat').collapse('hide')\n        return false\n      }\n\n\n      $('.navbar .dropdown-ia').removeClass('hatted').has(`.${mt}`).addClass('hatted')\n      $('#nav-tophat').on('hidden.bs.collapse', () => $('.navbar .dropdown-ia').removeClass('hatted'))\n\n\n      // any click makes tophat hide...\n      $(document).one('click.tophat.nixer', (event) => {\n        const $e = $(event.target)\n        // log($e)\n        if ($e.attr('id') === 'nav-wb-url')\n          return // ... except clicking on wayback machine form input\n        if ($e.is('a'))\n          return // ... except clicking on a link\n        if ($e.hasClass('item-img')  ||  $e.hasClass('item-ia'))\n          return\n\n        // NOTE: if not open, we wont hide\n        $('#nav-tophat.in').collapse('hide')\n      })\n\n      return false\n    })\n  }\n\n\n  static isTouchDevice() {\n    return ('ontouchstart' in window ||\n            (window.DocumentTouch && document instanceof window.DocumentTouch))\n  }\n\n\n  static footer() {\n    if (!AJS.isTouchDevice()  &&  typeof $.fn.tooltip !== 'undefined') {\n      $('.navbar [data-toggle=\"tooltip\"], .container-ia [data-toggle=\"tooltip\"], #cols [data-toggle=\"tooltip\"], #tvbanner [data-toggle=\"tooltip\"]').tooltip({\n      })\n      // $('body').addClass('glyphs-as-text')\n    }\n  }\n\n\n  static wrapdark_watcher() { // no longer needed/used but has some handy techniques...\n    if (!AJS.$sharedown) {\n      AJS.$sharedown = $('#sharedown')\n      AJS.$wrapdark  = $('#wrapdark')\n    }\n\n    // every second, sigh, check/adjust for the wrapdark height\n    if (!AJS.wrapdark_watcher_ptr)\n      AJS.wrapdark_watcher_ptr = setInterval(AJS.wrapdark_watcher, 1000)\n\n    if (!AJS.$sharedown.length  ||  !AJS.$wrapdark.length) {\n      clearInterval(AJS.wrapdark_watcher_ptr)\n      return\n    }\n\n    const wrapdarkHT = AJS.$sharedown.offset().top + AJS.$sharedown.find('.panel-heading').innerHeight()\n    if (parseInt(AJS.$wrapdark.css('height'), 10) !== wrapdarkHT) {\n      AJS.$wrapdark.css({ height: wrapdarkHT }).show()\n      log('       WRAPDARK-ED to ', wrapdarkHT)\n    }\n  }\n\n\n  static mute_click() {\n    const mutedNOW = !$.cookie('unmute')\n\n    if (this.emulator) {\n      this.emulator.setMute(!mutedNOW)\n    } else {\n      const player = jwplayer('jw6')\n      if (player) {\n        const volnow = player.getVolume()\n        if (volnow) {\n          AJS.mute_click_prior_volume = volnow\n          player.setVolume(0)\n        } else {\n          player.setVolume(typeof AJS.mute_click_prior_volume === 'undefined' ? 100 :\n            AJS.mute_click_prior_volume)\n        }\n      }\n    }\n\n\n    $('#theatre-ia .iconochive-mute, #theatre-ia .iconochive-unmute').toggle()\n\n\n    if (mutedNOW) {\n      // sounds is off.  make it loud\n      $.cookie('unmute', 1, { path: '/details', expires: 30 })\n    } else {\n      // sounds is on.  mute it!\n      $.cookie('unmute', null, { path: '/details' })\n    }\n\n\n    return false\n  }\n\n\n  static emulate_setup(game) {\n    // eslint-disable-next-line  no-param-reassign\n    game.toString = (() => game.identifier)\n    AJS.emulator = new IALoader(\n      $('#canvas').get(0), game, null,\n      (game.scale ? parseFloat(game.scale) : 1),\n      (game.module.indexOf('dosbox') === 0 ? '/images/dosbox.png' : '/images/mame.png'),\n    )\n\n\n    $('#theatre-ia .iconochive-unmute, #theatre-ia .iconochive-mute').hide()\n    if ($.cookie('unmute')) {\n      $('#theatre-ia .iconochive-unmute').show()\n      AJS.emulator.unmute()\n    } else {\n      $('#theatre-ia .iconochive-mute').show()\n      AJS.emulator.mute()\n    }\n\n    AJS.theatre_controls_position()\n    $(window).on('resize  orientationchange', () => {\n      clearTimeout(AJS.theatre_controls_position_throttler)\n      AJS.theatre_controls_position_throttler = setTimeout(AJS.theatre_controls_position, 250)\n    })\n  }\n\n\n  static emulate() {\n    /* global  canvas  IALoader  DOSBOX  JSMESS  Module */\n\n    // move the virtual keyboard thing and give it a \"go away!\" button\n    $('.ui-keyboard').prepend(`\n      <button style=\"position:relative;top:-5px;right:-8px;\" type=\"button\" class=\"close\"\n              onclick=\"$('.ui-keyboard').removeClass('showing').hide()\" aria-hidden=\"true\">\n        <span class=\"iconochive-remove-circle\"></span></button>`)\n      .appendTo($('#emulate .posrel')).addClass('showing')\n\n    $('#jsmessSS').fadeOut('slow')\n    $('#canvasholder').css('visibility', 'visible')\n    AJS.emulator.start({ hasCustomCSS: true })\n\n    // setup the theatre-ia fullscreen button\n    const EM = (JSMESS  ||  DOSBOX  ||  false)\n    if (EM  &&  (canvas.webkitRequestFullScreen || canvas.mozRequestFullScreen ||\n                  canvas.requestFullScreen)) {\n      $('#gofullscreen').on('click', () => Module.requestFullScreen(1, 0))\n      /**/ if ('onfullscreenchange'       in document) document.addEventListener('fullscreenchange',       EM.fullScreenChangeHandler)\n      else if ('onmozfullscreenchange'    in document) document.addEventListener('mozfullscreenchange',    EM.fullScreenChangeHandler)\n      else if ('onwebkitfullscreenchange' in document) document.addEventListener('webkitfullscreenchange', EM.fullScreenChangeHandler)\n    }\n\n    setTimeout(AJS.theatre_controls_position,   100)\n    setTimeout(AJS.theatre_controls_position,   500)\n    setTimeout(AJS.theatre_controls_position,  3000)\n    setTimeout(AJS.theatre_controls_position, 10000)\n\n    return false\n  }\n\n\n  static theatre_controls_position($selectorIn, pegTop, widthIn, heightIn) {\n    // We have lots of callers!  video, software, texts.\n    // So sort out our args and where we gonna \"peg\"/glue things to...\n    let $selector = $selectorIn\n    const video = (heightIn  &&  !$selectorIn)\n    if (!video) {\n      if (!$selectorIn) $selector = $('#canvas') // software emulation\n      if (!$selector.length) return // protect against emulated embeds and undef...\n    }\n\n    const height = (video ? heightIn : $selector.height())\n    const width  = (video ? widthIn  : $selector.width())\n\n    if (!video  &&  typeof pegTop !== 'undefined')\n      $('#theatre-controls').offset({ top: pegTop })\n\n\n    // Subtract out the width of the controls to get total amount of black pixels\n    // to the right of the theatre object.\n    // We want to position the controls in the middle of the dark pixels / right gutter!\n    const right_gutter_width =\n      Math.round(($('#theatre-ia-wrap').width() - $('#theatre-controls').width() - width) / 2)\n\n    log('width', width)\n    log('right_gutter_width', right_gutter_width)\n\n\n    $('#theatre-controls').css({\n      height,\n      visibility: 'visible',\n      right: Math.max(20, right_gutter_width / 2),\n    })\n  }\n\n\n  static booksize() {\n    if (!$('#texty').length)\n      return\n\n    // Use the standard theatresize function\n    AJS.theatresize()\n\n    const pollingMillis = 200\n\n    // Change the bg in the iframe\n    const $textyiframe = $('#texty iframe')\n    const changeBgColor = () => {\n      const $contentDom = $($textyiframe.get(0).contentDocument)\n      const $match = $contentDom.find('#BookReader')\n      if ($match.length > 0) {\n        $contentDom.find('body, #BookReader').css('background-color', 'transparent')\n        return true\n      }\n      return false\n    }\n    if (!changeBgColor()) {\n      const bgColorInterval = setInterval(() => {\n        if (changeBgColor())\n          clearInterval(bgColorInterval)\n      }, pollingMillis)\n    }\n\n    // Setup the controls\n    // NOTE The attribute data-lendable-book is added in Details.inc\n    const isLendableBook = typeof $('#texty').data('lendable-book') !== 'undefined'\n    if (!isLendableBook && !AJS.booksize_controls_hidden) {\n      AJS.booksize_controls()\n      const bookSizeInterval = setInterval(() => {\n        if (!AJS.booksize_controls_hidden)\n          AJS.booksize_controls()\n        else\n          clearInterval(bookSizeInterval)\n      }, pollingMillis)\n    }\n  }\n\n  // Hides the book controls, per david!\n  // Also positions the \"theatre controls\"\n  static booksize_controls() {\n    const $iframe = $('iframe:first')\n    if (!$iframe.length)\n      return\n    const $iframeDOM = $($iframe.get(0).contentDocument)\n    if (!$iframeDOM.length)\n      return\n\n    if (!AJS.booksize_controls_hidden) {\n      if (!$iframeDOM.find('#BRnav').length) {\n        log('BOOK NOT READY YET')\n        return\n      }\n      if ($iframeDOM.find('#BRtwopageview').length > 0) {\n        // Only hide nav in 2up. Show it in 1up\n        $iframeDOM.find('#BRnav').hide()\n      }\n      AJS.booksize_controls_hidden = true\n      $('#texty iframe').css('visibility', 'visible')\n      log('BOOK CONTROLS HIDDEN!')\n    }\n\n    $iframeDOM.find('body, #BookReader').css('background-color', 'transparent')\n\n    // now position the theatre controls\n    const $book = $iframeDOM.find('#BRtwopageview, #BRpageview')\n\n    // compute where the logical top point should be for the book and for the controls\n    // (which is comparable to A/V items)\n    const $navbar = $('.navbar')\n    // NOTE: we *do* check the nav top (almost always 0!) for rare cases we have a banner\n    // *ABOVE* the navbar, eg: EOY donate banner campaign (which is above the nav)!\n    const pegTop = ($navbar.offset().top + $navbar.height() +\n                    parseInt($('#texty').css('padding-top'), 10))\n    AJS.theatre_controls_position($book, pegTop)\n    log('book top', $iframe.offset().top + $book.offset().top, ' -v- pegTop', pegTop)\n\n    // and now dont overflow negative margin-bottom blackness into metadata section\n    $('#theatre-ia').css({ overflow: 'hidden' })\n  }\n\n\n  static popcornsize() {\n    const resizer = () => {\n      const metadataHeight = 100 // metadata peekaboo min height!\n      const maxH = $(window).height() - $('iframe:first').offset().top - metadataHeight\n      const maxW = $('#theatre-ia .row').outerWidth()\n      // make max height at most 16x9 ratio (43px is the popcorn controls height)\n      const WH = { width: maxW, height: Math.min(maxH, ((maxW * 9) / 16) + 43) }\n      log('popcorn resize: ', WH)\n      $('iframe:first').css(WH) // resize popcorn\n    }\n    resizer() // page load event is now\n    $(window).on('resize  orientationchange', () => {\n      clearTimeout(AJS.popcorn_throttler)\n      AJS.popcorn_throttler = setTimeout(resizer, 250)\n    })\n  }\n\n\n  /**\n   * A general purpose theatre sizing function.\n   * It keeps the metadata below the theatre partially visible.\n   * @param {function} onChange - called when size changes\n   * @global AJS.theatresize_maxheight if this is set by another\n   *   part of the code, it will contrain to this max height.\n   */\n  static theatresize(onChange) {\n    if (!AJS.theatresize_maxheight)\n      AJS.theatresize_maxheight = null\n    const resizer = () => {\n      const metadataHeight = 100 // metadata peekaboo min height!\n      const maximumHeight = 1000 // don't get larger than this\n      const minHeight = Math.min($(window).width(), 400)\n      let targetHeight = $(window).height() - $('#navwrap1').height() - metadataHeight\n\n      if (AJS.theatresize_maxheight)\n        targetHeight = Math.min(targetHeight, AJS.theatresize_maxheight)\n\n      targetHeight = Math.max(targetHeight, minHeight)\n      const height = Math.min(targetHeight, maximumHeight)\n      $('#theatre-ia-wrap').addClass('resized').css('height', height)\n\n      if (onChange)\n        onChange($('#theatre-ia-wrap').height())\n    }\n    resizer() // page load event is now\n    $(window).on('resize  orientationchange', () => {\n      clearTimeout(AJS.theatresize_throttler)\n      AJS.theatresize_throttler = setTimeout(resizer, 250)\n    })\n  }\n\n  /**\n   * Will reduce the vertical size of the carousel once all the images have\n   * downloaded and only if they are all smaller than the current size.\n   * This is a progressive enhancement\n   * @param string selector\n   * @param bool enableThreatreChange\n   */\n  static carouselsize(selector, enableThreatreChange) {\n    const $carousel = $(selector)\n    const imagePromises = $carousel.find('img.carousel-image').map((i, img) => {\n      const promise = $.Deferred()\n      let result\n      if (img.complete) {\n        result = promise.resolve(img.naturalHeight).promise()\n      } else {\n        img.addEventListener('load', () => {\n          promise.resolve(img.naturalHeight)\n        })\n        result = promise\n      }\n      return result\n    })\n    $.when(...imagePromises).then((...args) => {\n      const currHeight = $carousel.height()\n      const maxImageHeight = Math.max(...args)\n      if (currHeight > maxImageHeight) {\n        $carousel.css('maxHeight', maxImageHeight)\n        if (enableThreatreChange) {\n          AJS.theatresize_maxheight = maxImageHeight\n          $(window).trigger('resize')\n        }\n      }\n    })\n  }\n\n  static pause(id = 'jw6') {\n    const jw = jwplayer(id)\n    if (jw  &&  jw.getState  &&  jw.getState().toLowerCase() === 'playing')\n      jw.pause()\n  }\n\n\n  static morf(lnk, switchToA2Z) { // MORe Facets\n    const href = $(lnk).attr('href')\n\n    if (switchToA2Z  &&  switchToA2Z[0] === '-')\n      $.cookie(switchToA2Z.substr(1).concat('A2Z'), 1, { path: '/', expires: 1 })\n    else if (switchToA2Z)\n      $.cookie(switchToA2Z.concat('A2Z'), null, { path: '/', expires: 1 })\n\n\n    const props = { selectorID: 'morf-modal' }\n    const selector = `#${props.selectorID}`\n\n    const contents = (\n      <div className=\"modal-dialog\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header modal-header-std\">\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n              <span className=\"iconochive-remove-circle\" />\n            </button>\n            {/* eslint-disable  jsx-a11y/heading-has-content */}\n            <h2 className=\"modal-title\" />\n            {/* eslint-enable   jsx-a11y/heading-has-content */}\n          </div>\n          <div className=\"modal-body\" id={props.selectorID.concat('-body')} />\n        </div>\n      </div>)\n    if (!$(selector).length)\n      $('body').prepend($(`<div id=\"${props.selectorID}\" class=\"modal fade\" role=\"dialog\" aria-hidden=\"true\"/>`))\n\n    ReactDOM.render(contents, $(selector).get(0))\n    $(selector).modal('show')\n\n    ReactDOM.render(<AJS.MORFreact href={href} />, $(`${selector}-body`).get(0))\n\n    return false\n  }\n\n  static add2list(lnk) {\n    const href = $(lnk).attr('href')\n\n    $.get(`${href}&headless=1&titlelist=${$(lnk).text()}`, (htm) => {\n      // dynamically add modal to page (if isnt there already)\n      AJS.modal_go(lnk, {\n        title: 'Add To List',\n        headerClass: 'modal-header-new-list',\n        ignore_lnk: true,\n        auto_remove: true,\n        body: htm,\n      })\n    })\n\n    return false\n  }\n\n  static newlist(lnk) {\n    const href = $(lnk).attr('href')\n\n    $.get(href.concat('&headless=1'), (htm) => {\n      // dynamically add modal to page (if isnt there already)\n      AJS.modal_go(lnk, {\n        title: 'Create New List',\n        headerClass: 'modal-header-new-list',\n        ignore_lnk: true,\n        body: htm,\n      })\n    })\n\n    return false\n  }\n\n  static newlist_submit() {\n    // Strings with SPACE characters will be changed to \"camel case\".\n    // For example:\n    //    \"my LA roadtrip\"\n    // will become:\n    //    \"MyLaRoadtrip\"\n    // Letters, numbers, periods (.), dashes (-), or underscores (_) are ok, but\n    // other characters will be removed.\n    const title = $('#new-list-form input[name=title]').val()\n    if (!title.length) {\n      // eslint-disable-next-line  no-alert\n      alert('Please enter a title for your List')\n      return false\n    }\n\n    // turn the title into an acceptable identifier\n    // (1) remove any \"bad\" chars\n    // (2) trim any *leading* chars like:  - _ .\n    const cleaned = title.replace(/[^a-zA-Z0-9_\\-.]/g, '').replace(/^[_\\-.]+/, '')\n    log(cleaned)\n\n    if (!cleaned.length) {\n      // eslint-disable-next-line  no-alert\n      alert('Please try another title that contains more alphanumeric characters')\n      return false\n    }\n\n    return true\n  }\n\n  static popover_menu(selector, opts) {\n    // setup options\n    const options = {\n      trigger: 'hover focus click', // make accessible\n      container: selector,\n      content: opts.content,\n      html: true,\n    }\n    // do not overwrite values given by the 'data-' attribute\n    if (opts.title)\n      options.title = opts.title\n    if (opts.placement)\n      options.placement = opts.placement\n    if (opts.trigger)\n      options.trigger = opts.trigger\n\n    // setup popover\n    $(selector).popover(options)\n  }\n\n\n  // makes the tooltip show for picking dates\n  static date_switcher(htm) {\n    const selector = '#date_switcher'\n\n    // make a tooltip trigger manually, on hover, but then *hold it showing*\n    // until they leave area *including* tooltip itself\n    $(selector).tooltip({\n      html: true,\n      trigger: 'manual', // we gonna control hover behaviour\n      placement: 'bottom',\n      title: htm,\n    }).on('mouseenter focusin', function date_switcher_hover() {\n      // check first if already showing, to avoid \"flickering\" with \"show! .. show!\"\n      if (!($(selector).parent().find('.tooltip').length))\n        $(this).tooltip('show')\n    })\n\n\n    // the date_switcher lives inside bigger \"sortbar\".  the date changing tooltip\n    // lives inside it (and hangs off it).  So what we *really* want as the trigger\n    // to hide the date change tooltip is the entire sortbar itself.  nice!\n    $('.sortbar').on('mouseleave', () => {\n      log('not hovering sortbar anymore')\n      $(selector).tooltip('hide')\n    })\n\n\n    $(selector).on('shown.bs.tooltip', () => {\n      // make any link hit change which one is \"in\"\n      // (just before page starts to reload)  finesse!\n      $(selector).parent().find('.date_switcher').on('click', function date_switcher_click() {\n        $(this).parents('.tooltip').find('.date_switcher.in').removeClass('in')\n        $(this).addClass('in')\n      })\n    })\n  }\n\n\n  // NOTE: UNUSED BUT KEPT IN CASE WE EVER GO BACK FROM NEWER/BETTER CSS-ONLY SOLUTION!\n  //\n  // [ Now we use CSS to (max-/)width C2 and C4 *instead* for a much better user experience\n  //   AND for a more efficient / kinder to browser non-JS solution! ]\n  static tiles_to_list() {\n    /*\n      First, allow natural HTM/CSS widths of 3 of 5 \"table-cell\" display type columns\n        C1         C234      C5\n        VIEWS  ..  DATE  ..  MT-ICON\n\n        Compute width of \"C234\" - width of C3/DATE.\n        Split TITLE (C2) and CREATOR (C4) max-width into\n        60% / 40% split of that #pixels.\n    */\n\n    // NOTE: there can be 2+ sets of results on a page -- eg: \"My Library\" page!\n    const selector = AJS.selector()\n    const $selector = $(selector).first()\n    log('lister() SELECTOR', selector)\n\n    const C3   = $selector.find('.results .item-ia:first   .C3').outerWidth()\n    const C234 = $selector.find('.results .item-ia:first .C234').outerWidth()\n\n    // the \"-20\" was empirically observed / made up -- get some science, girl!\n    const availWidth = (C234 - C3) - 20\n    const C2 = Math.max(80, Math.round(0.6 * availWidth))\n    const C4 = Math.max(80, Math.round(0.4 * availWidth))\n    log('C3  ',   C3)\n    log('C234', C234)\n    log('C2  ',   C2)\n    log('C4  ',   C4)\n    log(' ==> availWidth: ', availWidth, '(', C2, '+', C4, ')')\n\n    $selector.find('.results .item-ia .C2').css({ width: C2, 'max-width': C2 })\n    $selector.find('.results .item-ia .C4').css({ width: C4, 'max-width': C4 })\n  }\n\n\n  // We moved to newer tactic Mar2015...\n  // Pages are emitted by default with body classes \"lists\" and \"showdetails\".\n  // We use JS to toggle/remove them and switch off details or switch to \"tiles\" mode.\n  static lists_v_tiles_setup(cookie_range) {\n    // does user have any cookied preferences?\n    const defaults    = 'tiles' // (cookie_range === 'search' ? 'lists' : 'tiles')\n    const prefer      = ($.cookie(`view-${cookie_range}`))\n    const showdetails = ($.cookie(`showdetails-${cookie_range}`))\n\n    const checked = (showdetails === 'showdetails'  ||\n                      (showdetails === null  &&  defaults === 'lists'))\n\n    if (prefer === 'lists'  ||  (!prefer  &&  defaults === 'lists')) {\n      if (checked)\n        return // perfect, we are already what they want\n      $('body').removeClass('showdetails') // they dont want full details right now\n    } else {\n      // switch to \"tiles\" mode\n      $('body').removeClass('lists'.concat(checked ? '' : ' showdetails')).addClass('tiles')\n    }\n  }\n\n\n  static showdetails_toggle(btn, cookie_range) {\n    const $body = $('body')\n\n    const to = ($body.hasClass('showdetails') ? '' : 'showdetails')\n    log('showdetails_toggle() going to: ', to)\n\n    $.cookie(`showdetails-${cookie_range}`, to, { path: '/', expires: 30, domain: '.archive.org' })\n\n    $body.toggleClass('showdetails')\n  }\n\n\n  static tiles_toggle(btn, cookie_range) {\n    const $body = $('body')\n\n    const to = ($body.hasClass('tiles') ? 'lists' : 'tiles')\n    log('tiles_toggle() going to', to)\n\n    $body.removeClass('lists tiles').addClass(to)\n    AJS.tiler()\n\n    $.cookie(`view-${cookie_range}`, to, { path: '/', expires: 30, domain: '.archive.org' })\n\n    return false\n  }\n\n\n  // Returns one of these, like \"#ikind-[IKIND]\"\n  //\n  // COLLECTION PAGES, ACCOUNT PAGES:\n  //\n  //   #ikind--downloads\n  //   #ikind--titleSorter\n  //   #ikind--publicdate\n  //   #ikind--date\n  //   #ikind--reviewdate\n  //   #ikind--updatedate\n  //   #ikind--creatorSorter\n  //\n  //   #ikind-downloads\n  //   #ikind-titleSorter\n  //   #ikind-publicdate\n  //   #ikind-date\n  //   #ikind-reviewdate\n  //   #ikind-updatedate\n  //   #ikind-creatorSorter\n  //\n  // ACCOUNT PAGES (additionally):\n  //\n  //   #ikind-loans-waiting-list\n  //   #ikind-loans-on-loan\n  //   #ikind-loans-history\n  //\n  // OTHER:\n  //\n  //   #ikind-search              (search)\n  //\n  static selector() {\n    const inTab = $('.welcome .tabby.in .tabby-text')\n      .first()\n      .text()\n      .toLowerCase()\n      .trim()\n    if (inTab === 'forum'  ||  inTab === 'posts'  ||  inTab === 'about')\n      return false // no tab of tiles are showing\n\n    let selector = false\n    if (inTab) {\n      // We want to end up with a selector like:\n      //    #ikind-collections-title\n      //    #ikind--publicdate\n      log('inTab', inTab)\n      const tmp = `#tabby-${inTab.replace(' ', '-')}`\n      if (inTab === 'collection'  ||  inTab === 'collections'  ||  inTab === 'uploads' || inTab === 'reviews' || inTab === 'web archives') {\n        selector = '#'.concat($(tmp.concat(' div.ikind.in:first')).attr('id'))\n      } else {\n        const ikind = $(tmp.concat(' .ikind.stealth.in:first')).text().toLowerCase().replace(/ /, '-')\n        selector = `#ikind-${inTab}${ikind === '' ? '' : '-'}${ikind}`\n      }\n    } else {\n      // we want to end up with a selector like:\n      //    #ikind-date\n      selector = '#ikind-'.concat($('.ikind.stealth.in:first').text().toLowerCase().replace(/ /, '-'))\n      if (!$(selector).length) selector = '#ikind-search' // xxx  SHORE THIS UP, GIRL!\n    }\n\n    log('SELECTOR', selector)\n\n    return selector\n  }\n\n\n  // function that finds alternate (non-AJS.tiler()) sets of item tiles,\n  // that are laid out in strips/columns and will hide entire columns\n  // if they fall off the right side, in terms of fitting to browser/page width\n  static tilebars() {\n    // iterate over all row classes that have at least 1 .tilebars .results div in them...\n    $('.row .tilebars').find('.results').parents('.row').each((k, row) => {\n      let first = false\n      $(row).find('.results').each((key, val) => {\n        $(val).show().css({ visibility: 'hidden' })\n        if (!first)\n          first = $(val).offset()\n        if ($(val).offset().top !== first.top)\n          $(val).hide()\n        else\n          $(val).css({ visibility: 'visible' })\n      })\n      // if (first) $(row).find('.tilebars > h4').css({'padding-left':first.left+10})\n    })\n  }\n\n\n  // adds collection parent hovering image and text to tiles\n  static parent_hover($selector) {\n    $selector.find('.item-ia:not(.hov):not(.collection-ia):not(.account-ia)').addClass('hov')\n      .mouseover((e => $(e.currentTarget).find('.item-parent').addClass('hoverin')))\n      .mouseout((e  => $(e.currentTarget).find('.item-parent').removeClass('hoverin')))\n  }\n\n\n  static tiler(selectorIn, noRecall) {\n    const tileMarginH = 30\n    const tileMarginW = 17\n\n\n    // See lister() for why this is able to be commented out now!\n    // $('.results .item-ia .C2, .results .item-ia .C4').css({'width':'','max-width':''});\n    if (!$('body').hasClass('tiles')) {\n      if ($('body').hasClass('showdetails'))\n        $('.sortbar input[name=showdetails]').prop('checked', true)\n      // AJS.lister()\n    }\n\n    const selector = (selectorIn  ||  AJS.selector())\n    if (selector === false)\n      return\n\n\n    const $selector = $(selector).first()\n    const selectorID = $selector.attr('id')\n    const $parentRow = $selector.parents('.row')\n\n    // CSS Grid tiler experiment.  OFF/unused.\n    // This could be a way to drop much of the JS to do our 'masonic' tiling by leveraging\n    // CSS Grid row 'strips' and space the tile to the closest overall height of narrow rows\n    // instead of JS-based calculations for absolute 'top' positioning.\n    const cssGrid = (false  &&  $('body').hasClass('devbox')  &&  CSS.supports('display', 'grid'))\n\n\n    if (!$('body').hasClass('tiles')) {\n      $parentRow.css({ 'padding-left': '', 'padding-right': '' })\n      return\n    }\n\n\n    if (!AJS.tilerPREV) {\n      // first time tiling page!\n      AJS.tilerPREV = {\n        winW: 0,\n        pad: 0,\n        nPerRow: 1,\n        gutter: tileMarginW,\n        tileWidth: AJS.TILE_WIDTH,\n        unsourced: {},\n        firstLeft: 0,\n      }\n\n      AJS.parent_hover($selector)\n    }\n\n    if ($(window).width() !== AJS.tilerPREV.winW) {\n      // First time, or page resize/orientation change.\n      // We will effectively \"cache\" all this adjusting computations, so multiple calls to tiler()\n      // can reuse if window width hasnt changed\n      // (for efficiency, eg: many images still slowly loading..)\n      $parentRow.css({ 'padding-left': '', 'padding-right': '' }) // reset (see below)\n      AJS.tilerPREV.firstLeft = 0  // reset (see below)\n\n      const $facets = $parentRow.find('.columns-facets:visible')\n      let facetsWidth = $facets.outerWidth()  ||  0\n      if (facetsWidth)\n        facetsWidth += 1 + parseInt($facets.css('padding-right'), 10) // add columns-items gutter\n      const availWidth = $parentRow.width() - facetsWidth\n      const gutter = (availWidth < 400 ? 5 : tileMarginW)\n      const tileWidth = ($('.item-ia:first').outerWidth() >= AJS.TILE_WIDTH ? AJS.TILE_WIDTH : AJS.TILE_WIDTH_SMALL)\n      const nPerRow = Math.max(1, Math.floor((availWidth + gutter) / (tileWidth + gutter)))\n      const extra   = Math.max(0, (availWidth - (nPerRow * (tileWidth + gutter))) + gutter)\n\n      log(\n        'tiling', selectorID,\n        'parentRowW', $parentRow.width(),\n        'facetsWidth', facetsWidth,\n        'availWidth: ', availWidth,\n        'number per row', nPerRow, '. ',\n        'With gutter margin', gutter,\n        'had ', extra, 'extra pixels',\n      )\n      AJS.tilerPREV.pad = Math.round(extra / 2)\n\n      AJS.tilerPREV.winW = $(window).width()\n      AJS.tilerPREV.nPerRow = nPerRow\n      AJS.tilerPREV.gutter = gutter\n      AJS.tilerPREV.tileWidth = tileWidth\n    }\n\n    if (!cssGrid) {\n      if (AJS.tilerPREV.nPerRow > 1)\n        $parentRow.css({ 'padding-left': AJS.tilerPREV.pad, 'padding-right': AJS.tilerPREV.pad })\n      else\n        AJS.tilerPREV.firstLeft = AJS.tilerPREV.pad\n    }\n\n    let nImgZeroHeight = 0\n    const nImgZeroHeightAry = []\n    let maxtop = 0\n    const tops = { 0: 0 }\n    const lefts = { 0: AJS.tilerPREV.firstLeft }\n    if (!cssGrid) {\n      for (let i = 1; i < AJS.tilerPREV.nPerRow; i++) {\n        lefts[i] = lefts[i - 1] + AJS.tilerPREV.gutter + AJS.tilerPREV.tileWidth\n        tops[i] = 0\n      }\n    }\n\n\n    // Any item tiles w/ unloaded/set src tags get updated and loaded now!\n    // Only have to do this pass on a swathe of new results (1st page or infin scroll set added)\n    if (!AJS.tilerPREV.unsourced[selectorID]) {\n      log('unsourcing', selectorID)\n      // eslint-disable-next-line  prefer-arrow-callback\n      $selector.find('.item-ia img[source]').each(function tiler_unsourcing(k, v) {\n        $(v).attr({\n          src: $(v).attr('source'),\n          onError: '$(this).attr(\"src\",\"/images/notfound.png\")',\n        }).removeAttr('source')\n      })\n      AJS.tilerPREV.unsourced[selectorID] = 1\n    }\n\n\n    if (cssGrid)\n      $selector.find('.results').removeClass('grid-tiles') // we need to let tiles size naturally first\n    else\n      AJS.colPREV = -1 // we track where previous tile was placed\n\n    $selector.find('.item-ia').not('.mobile-header').css('visibility', 'hidden').each((idx, val) => {\n      const $val = $(val)\n      const $valHT = $val.innerHeight()\n      // log('$valHT', $valHT)\n\n      const css = {}\n      if (cssGrid) {\n        log(`${$valHT} span: ${Math.ceil(($valHT + 25) / 35)}`)\n        css['grid-row-end'] = `span ${Math.ceil(($valHT + 25) / 35)}`\n      } else {\n        let col = 0\n        if (AJS.tilerPREV.nPerRow > 1  &&  idx >= AJS.tilerPREV.nPerRow) {\n          // First, cycle from last placed tile column location to \"first cycled slot\".\n          // (That is, move \"1 to right\" from last placed tile column, but it's a cycle/ring\n          // for final column -- go to 1st column in that case).\n          // Test place new tile *there* (in \"first cycled slot\") UNLESS further ahead in\n          // cycle/ring of other slots, the tile will fit where its BOTTOM will be above where\n          // tile TOP would be in the \"first cycled slot\".\n          // (and pick the \"first\" in such a case if 2+ slots like that)\n          const colTEST = ((AJS.colPREV + 1)  %  AJS.tilerPREV.nPerRow)\n          col = colTEST // fallback/default\n          const cmpTEST = tops[colTEST] - $valHT // [slightly more efficient way 2 compare]\n          for (let i = 0; i < AJS.tilerPREV.nPerRow; i++) {\n            if (i !== colTEST  &&  cmpTEST > tops[i]) {\n              col = i\n              break\n            }\n          }\n        } else {\n          col = (idx % AJS.tilerPREV.nPerRow)\n        }\n        AJS.colPREV = col\n        css.visibility = 'visible'\n        css.top  =  tops[col]\n        css.left = lefts[col]\n\n        // setup for next tile...\n        tops[col] += ($valHT + tileMarginH)\n\n        maxtop = Math.max(maxtop, tops[col])\n      }\n\n      $val.css(css)\n\n\n      // track how many tile images are without height\n      // (either not loaded or no CSS height style set if img not loading from DB)\n      let tmp = $val.find('.item-img')\n\n      if (tmp.length  &&  !($val.find('.item-img').height())) {\n        nImgZeroHeight += 1\n        tmp = $val.attr('data-id')\n        if (tmp)\n          nImgZeroHeightAry.push(tmp)\n      }\n    })\n\n    if (cssGrid) {\n      $selector.find('.results').addClass('grid-tiles')\n      $selector.find('.item-ia').css({ visibility: 'visible' })\n    } else {\n      // we have to manually set the height of the \"selector\"\n      log('maxtop', maxtop)\n      $selector.find('.results').css({ height: maxtop })\n    }\n\n\n    if ($('body').hasClass('manage')) {\n      $('.item-ia:not(.removable)').addClass('removable').append(`\n        <div class=\"xer\" onclick=\"return AJS.unmanage(this)\" title=\"remove item from being submitted to item management\"></div>`)\n    }\n\n\n    if ((nImgZeroHeight)  &&  !noRecall) {\n      log(\n        nImgZeroHeight, ' img (still w/o height); recall tiler(', selector, ')...',\n        nImgZeroHeightAry.join(','),\n      )\n      // recall ourselves, but not more than once every 1.5 seconds!\n      clearTimeout(AJS.tiler_throttler)\n      AJS.tiler_throttler = setTimeout(() => AJS.tiler(selector, 0), 1500)\n    }\n  }\n\n\n  static ikind(lnk, id) {\n    const idsel = `#${id}`\n    log('ikind', id)\n    $(idsel).parent().find('div.ikind.in').hide()\n    $(idsel).removeClass('hidden').addClass('in').show()\n    $(idsel).parents('.tabby-data').find('a.ikind').removeClass('in')\n\n    $(lnk).addClass('in')\n\n    AJS.tiler(idsel)\n\n    // now select the corresponding element in the shadowing select for mobile\n    const $sel = $(idsel).parents('.tabby-data').find('select.ikind-mobile')\n    const $new = $sel.find('option:contains('.concat($(lnk).text(), ')'))\n    const $now = $sel.find('option:selected')\n    if ($new.text().trim() !== $now.text().trim()) {\n      log('changing ikind mobile now to ', $new.text())\n      AJS.ikind_mobile_change_ignore_next = true\n      $new.attr('selected', 'selected')\n      // $now.removeAttr('selected')\n    }\n\n    return false\n  }\n\n  static ikind_mobile_change(elm) {\n    if (AJS.ikind_mobile_change_ignore_next) {\n      AJS.ikind_mobile_change_ignore_next = false\n      return\n    }\n\n    const $selopt = $(elm).find('option:selected')\n    log('ikind mobile changed to: ', $selopt.text())\n    let $ikinds = $(elm).parents('.tabby-data').find('a.ikind')\n    if (!$ikinds.length) {\n      // NO tabby!  eg: top page or search page\n      $ikinds = $('body').find('a.ikind')\n    }\n\n    if (!$ikinds.length)\n      return // uho!\n\n    const $ikind = $ikinds.filter((k, v) => $(v).text() === $selopt.text())\n\n    const href = $ikind.attr('href')\n    log('goto', href)\n\n    if (href) {\n      if (href.substr(0, 1) === '#') {\n        // ACCOUNT PAGE (FOR NOW)!  (STILL USES HASH FOR NOW)\n        $(`a.ikind[data-id=${href.substr(1)}]`).click()\n      } else {\n        location.href = href\n      }\n    }\n  }\n\n\n  static popState(pageType) {\n    // are we watching history.pushState() and history.popState() calls?\n    AJS.pushState = (typeof history.pushState !== 'undefined')\n    log('popState(', pageType, ') called, modern browser: ', (AJS.pushState ? 'y' : 'n'))\n\n    if (pageType) // anything custom we need to do based on pageType?\n      return\n\n\n    const tabPick = (hash2arg) => {\n      let tab = AJS.arg('tab', true)\n      if (tab)\n        tab = `#tabby-${tab}-finder`\n      else if (hash2arg)\n        tab = `#tabby-${hash2arg}-finder`\n      else\n        tab = '.tabby-default-finder'\n\n      if (AJS.pushState)\n        log('goto tab: ', tab, ' ################################################### STATE')\n      AJS.tabby_no_pushState_next_click = true\n      $(tab).click()\n    }\n\n    if (AJS.pushState) {\n      // runs on page load or browser \"back\":\n      $(window).on('popstate', () => tabPick())\n    }\n    // else user has an older browser or Opera Mini and doesn't have pushState/popState!\n\n    tabPick()\n  }\n\n\n  static tabby(lnk, id) {\n    log('AJS.tabby()', id)\n    const inTab = id.replace(/tabby-/, '').trim()\n    if (inTab === 'uploads' || inTab === 'reviews' || inTab === 'collections' || inTab === 'loans' || inTab === 'web archives') {\n      // account pages -- we need to fully reload page w/ new/wanted item tiles!\n      return true\n    }\n\n    // Only collection pages have tabs / proceed\n    // All three tabs have all the markup on the page already.\n    // So, for modern browsers, we will simply switch the visibile\n    // tab and update-in-place the url in the browser url typein\n    // -- WITHOUT refreshing the page.\n\n    $('.tabby-data.in').removeClass('in').hide()\n    $(`#${id}`).removeClass('hidden').addClass('in').show()\n    $('.tabby').removeClass('in')\n    $(lnk).parents('.tabby').addClass('in')\n\n    if (AJS.tabby_no_pushState_next_click) {\n      delete AJS.tabby_no_pushState_next_click\n    } else if (AJS.pushState  &&  typeof history.pushState !== 'undefined') {\n      const href = $(lnk).attr('href')\n      const locNOW = location.href\n      const locNEW = location.protocol.concat('//', location.host, href)\n      if (locNOW !== locNEW) {\n        log('pushState: ', href, ' ################################################### STATE')\n        history.pushState({}, '', locNEW)\n      }\n    }\n\n    if (inTab === 'collection'  ||  inTab === 'about') {  // collection pages\n      if (inTab === 'about')\n        AJS.grafs()\n      AJS.tiler()\n    }\n\n    if (AJS.pushState)\n      return false\n    return true\n  }\n\n\n  static colclick(e) {\n    const $e = $(e)\n    const id = $e.attr('data-id')\n\n    // *NORMALLY* clicking on a collection tile goes to it.\n    // BUT NOT:\n    //   * in lists mode (only the identifier link does that -- not other data columns!)\n    //   * if in process of removing items (eg: from favorites list)\n    if (id  &&  $('body').hasClass('tiles')  &&  !$e.hasClass('removable'))\n      location.href = `/details/${id}`\n  }\n\n  /**\n   * Processing to get related item using new API, Get response and Render using React component\n   */\n  static setUpRelatedItems() {\n    const alsoFoundElement  = $('#also-found-result')\n\n    // GET top offset of #also-found(related item section) and executing ajax call accordingly\n    if (alsoFoundElement.length !== 0) {\n      const $window = $(window)\n\n      const throttledListener = throttle(() => {\n        const alsoFound    = $('#also-found')\n        const topOffset    = alsoFound.offset().top\n        const windowHeight = $window.height()\n        // One half screen above the top of the element\n        const lazyLoadStart = topOffset - (windowHeight / 2)\n\n        if ($window.scrollTop() + windowHeight >= lazyLoadStart) {\n          if (alsoFoundElement.text() === '') {\n            // Show the tilebars, now that we've started loading\n            alsoFound.find('.tilebars').show()\n\n            ReactDOM.render(<AJS.LoadingMessage message=\"Fetching items\" />, alsoFoundElement[0])\n\n            AJS.doWhenScrolledToRelatedSection()\n              // Remove listener after it loads\n              .then(() => $window.off('scroll', throttledListener))\n          }\n        }\n      }, 100)\n\n      $window.scroll(throttledListener)\n    }\n  }\n\n  /**\n   * Get API response from AJS.getRelatedItems() after #also-found-result scrolled and\n   * render response using react component\n   *\n   * @return {Promise}\n   */\n  static doWhenScrolledToRelatedSection() {\n    const identifier = $('#also-found').data('identifier')\n    const alsoFoundElement = $('#also-found-result')\n\n    return AJS.getRelatedItems(identifier)\n      .then((response) => {\n        // Sending dataHash to React Componenet to render HTML of related items section\n        ReactDOM.render(<AJS.RelatedItemSection dataHash={response} />, alsoFoundElement[0])\n\n        // Set visibility:hidden of tiles for 2nd+ row esp. for narrower pages\n        AJS.tilebars()\n      })\n      .catch((error) => {\n        // Show messsage when similar items not found.\n        // Show the related items section, so we can display error\n        $('#also-found').show()\n        ReactDOM.render(<AJS.ErrorMessage errorMsg={error.message} />, alsoFoundElement[0])\n      })\n  }\n\n  /**\n   * API call to get related item and return response using Promise\n   *\n   * @param  {String} identifier item identifier\n   * @param  {Number} size number of item results (6 is the default)\n   * @return {Promise<Array|String>}\n   */\n  static getRelatedItems(identifier, size) {\n    return new Promise((resolve, reject) => {\n      const args = { size }\n      const apiUrl = `https://be-api.us.archive.org/mds/v1/get_related/all/${encodeURIComponent(identifier)}${(size ? `?${$.param(args)}` : '')}`\n      const hashData = []\n      let apiError = false\n\n      $.get(apiUrl, (response) => {\n        let items = []\n        try {\n          items = response.hits.hits\n          if (items.length === 0)\n            apiError = true\n        } catch (error) {\n          apiError = true\n        }\n\n        if (apiError) {\n          // Return error message to Promise when response is empty OR key not exists\n          reject(new Error('Similar items not found'))\n          return\n        }\n\n        items.forEach((item) => {\n          /* eslint no-underscore-dangle:\n          [error, { \"allow\": [\"_id\", \"_source\", \"_modal_add\"] }] */\n          const itemSource  = item._source\n          const singleHash  = {\n            identifier: item._id,\n            numReviews: 0,\n            lendingEnabled: false,\n            lendingAvailable: false,\n            loginRequired: false,\n            lendClass: '',\n            favorite: 0,\n            creator: '',\n          }\n\n          $.each(itemSource, (key, value) => {\n            if (key === 'downloads')\n              singleHash.downloads = [value[0]]\n\n            if (key === 'title')\n              singleHash.title = [value[0]]\n\n            if (key === 'mediatype')\n              singleHash.mediatype = [value[0]]\n\n            if (key === 'creatorSorter') {\n              // Replacing first character lower to CAPTIAL of each creator name.\n              // E.g goldsmith TO Goldsmith\n              value[0].replace(/\\w\\S*/g, (txt) => {\n                singleHash.creator += txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase().concat(' ')\n              })\n            }\n\n            if (key === 'collection') {\n              // Counting number of favorite colllections\n              value.forEach((val) => {\n                singleHash.favorite += (val.match(/fav-/g) || []).length\n              })\n\n              if (value.indexOf('loggedin') > 0)\n                singleHash.loginRequired = true\n            }\n\n            if (key === 'loans__status__status') {\n              singleHash.lendingEnabled = true\n              if (value[0] === 'AVAILABLE') {\n                singleHash.lendingAvailable  = true\n                singleHash.lendClass = 'lending-available'\n              } else {\n                singleHash.lendClass = 'lending-checked-out'\n              }\n            }\n\n            if (key === 'num_reviews')\n              singleHash.numReviews = [value[0]]\n          })\n\n          hashData.push(singleHash)\n        })\n        resolve(hashData) // Return related items hashData using Promise\n      }).error(() => {\n        reject(new Error('Similar items not found')) // Return error message to Promise when any error found\n      })\n    })\n  }\n\n\n  static list_remove_item(xer) {\n    if ($('body').hasClass('lists'))\n      $('.tiles-button:visible').click() // sorry!  only works in tiles mode now...\n\n\n    if (!xer) {\n      if (!$('.item-ia .xer').length) {\n        // make all items editable\n        $('.item-ia').addClass('removable').append('<div onclick=\"AJS.list_remove_item(this)\" class=\"xer\" alt=\"remove this item from list\" title=\"remove this item from list\"></div>')\n      } else {\n        // cancel editability\n        $('.item-ia').removeClass('removable')\n        $('.item-ia .xer').remove()\n      }\n    } else {\n      // single item is slated for utter destruction from the list...\n      const $item = $(xer).parents('.item-ia')\n      const idX = $item.attr('data-id')\n      let url = location.href.replace(/#.*$/, '').concat('?remove_item=', encodeURIComponent(idX))\n      // Use the most recent update date to help uniquely identify the item!\n      if ($item.attr('data-date'))\n        url += `&data-date=${$item.attr('data-date')}`\n      if (AJS.listkind)\n        url += `&kind=${AJS.listkind}`\n      log('GET', url)\n\n      $.get(url, (htm) => {\n        log('GOT', url)\n        log(htm)\n        $item.remove()\n        AJS.tiler()\n      })\n    }\n    return false\n  }\n\n\n  // remove an element from a search results page\n  static unmanage(xer) {\n    $(xer).parent('.item-ia').next().remove() // remove item list portion\n    $(xer).parent('.item-ia').remove()        // remove item tile portion\n    return false\n  }\n\n\n  // submits search results items to item manager for invoking operations on the list\n  static manage() {\n    // get list of all (remaining) identifiers in a search results page\n    const ids = $('.item-ia[data-id]').toArray().reduce((a, b) => {\n      const id = $(b).attr('data-id')\n      if (id === '__mobile_header__')\n        return a\n      return a.concat(id, ',')\n    }, '')\n    log('MANAGE', ids)\n\n    if (ids !== '') {\n      // now make a form that we can POST to, with all the identifiers,\n      // and post to /manage/ page\n      const $form = $(`\n        <form id=\"manage-ids\" method=\"POST\" action=\"/manage/\"\n              style=\"visibility:hidden;position:absolute;top:0;left:0;width:1px;height:1px;\">\n          <input type=\"text\" name=\"identifier\" value=\"${ids}\"/>\n        </form>`)\n      $('body').append($form) // NOTE: firefox needs it in DOM to submit\n      $form.submit()\n    }\n    return false\n  }\n\n\n  static head_img_dragdrop_setup(identifier) {\n    if (AJS.head_img_dragdrop_setup_done)\n      return\n    log('head_img_dragdrop_setup')\n    AJS.head_img_dragdrop_setup_done = true\n\n\n    $('#file-dropper-wrap').bind('mouseenter', () => {\n      log('enter')\n      AJS.head_img_replaceable(identifier)\n      $('#file-dropper').show()\n    }).bind('mouseleave', () => {\n      log('ouddie')\n      if (!AJS.file_picked)\n        $('#file-dropper').hide()\n    })\n\n    $('body').bind('dragover', (evt) => {\n      // enable file dropping\n      log('dragover')\n      evt.stopPropagation()\n      evt.preventDefault()\n\n      AJS.head_img_replaceable(identifier)\n      $('#file-dropper').addClass('drag_over').show()\n      return false\n    })\n\n    $('body').bind('dragleave', (evt) => {\n      log('dragleave')\n\n      // are we still over a file-dropper div/img?\n      let over = ($('#file-dropper-wrap').is(':hover') ||\n                  $('#file-dropper     ').is(':hover') ||\n                  $('#file-dropper-img ').is(':hover'))\n      const x = evt.pageX || evt.originalEvent.pageX\n      const y = evt.pageY || evt.originalEvent.pageY\n      if (!over) {\n        const e = $('#file-dropper-wrap')\n        const { left, top } = e.offset()\n        if (x >= left  &&  x <= left + e.outerWidth()  &&\n            y >= top   &&  y <= top  + e.outerHeight()) {\n          // still over the file drop target image area!\n          over = true\n        }\n      }\n      if (!over) {\n        const e = $('#file-dropper')\n        const { left, top } = e.offset()\n        if (x >= left  &&  x <= left + e.outerWidth()  &&\n            y >= top   &&  y <= top  + e.outerHeight()) {\n          // still over the file drop target image area!\n          over = true\n        }\n      }\n\n      if (!over)\n        $('#file-dropper').removeClass('drag_over').hide()\n    })\n  }\n\n  static head_img_replaceable(identifier) {\n    // helpfuls:\n    //  https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n    //  http://www.sitepoint.com/html5-ajax-file-upload/\n    if ($('#file-dropper').html().trim() !== '')\n      return\n\n    $('#file-dropper').show().html(`\n<div>\n<button id=\"file-cancel\" type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\"\n        title=\"cancel file upload\" alt=\"cancel file upload\">\n  &times;\n</button>\n<b>\n  <span style=\"font-size:40px; color:#aaa\" class=\"iconochive-plus-circle\" />\n</b><br/>\n<b>\n  Drag & Drop an image file here or\n</b>\n<button type=\"button\" class=\"btn btn-info btn-xs\" onclick=\"$('#file-selector').click();\">\n  Pick image to upload\n</button>\n<form method=\"POST\" action=\"/services/post-file.php?submit=1&identifier=${identifier}\"\n      enctype=\"multipart/form-data\" id=\"poster\">\n  <div class=\"hidden\">\n    <input id=\"file-selector\" name=\"file\" type=\"file\" accept=\"image/*\"/>\n  </div>\n  <input type=\"hidden\" name=\"identifier\" value=\"${identifier}\"/>\n  <input id=\"file-submit\" type=\"submit\" name=\"submit\" value=\"SUBMIT\" class=\"btn btn-success\"/>\n  <div id=\"file-uploading\">\n    Uploading your file..\n  </div>\n</form>\n</div>`)\n\n\n    $('#file-cancel').bind('click', (evt) => {\n      AJS.cancelFile()\n\n      evt.stopPropagation()\n      evt.preventDefault()\n      return false\n    })\n\n\n    $.event.props.push('dataTransfer') // if not set, dataTransfer is not sent\n\n\n    const success = () => {\n      log('success!')\n      // AJS.cancelFile()\n    }\n\n\n    // upload an image (typically a collection/list header or account/person profile)  via S3\n    // returns '' on success; else string w/ error/fail reason\n    const uploadFile = () => {\n      let fail = false\n\n      if (typeof XMLHttpRequest === 'undefined')\n        fail = 'browser appears to not have HTML5 functionality'\n\n      if (!fail)\n        fail = AJS.badFile()\n\n\n      const xhr = new XMLHttpRequest()\n      if (!fail) {\n        log(AJS.file2post)\n        if (!xhr.upload)\n          fail = 'browser submit setup failed'\n      }\n\n      if (fail)\n        return fail\n\n\n      // start upload\n      log('post')\n      // if (navigator.userAgent.indexOf('Safari') > 0) xhr.timeout = 10 * 60 * 1000; // 10 min\n      xhr.open(\n        'POST',\n        location.protocol.concat(\n          '//', location.host,\n          '/services/post-file.php?submit=1&identifier=', identifier,\n          '&fname=', encodeURIComponent(AJS.file2post.name),\n        ),\n        false,\n      ) // block synchronously on the post!\n      // if (!options.sendBoundary) xxx\n      xhr.setRequestHeader('Content-Type', 'multipart/form-data; charset=UTF-8')\n      xhr.send(AJS.file2post)\n\n      const reply = xhr.responseText\n      const mat = reply.match(/SUCCESS \\(task_id=(\\d+)\\)/)\n      if (mat  &&  mat.length) {\n        const task_id = mat[1]\n        log('STALKING TASK_ID: ', task_id)\n\n        $('#file-dropper').html('waiting for updates..')\n        let stalker_ptr = false\n        const stalker = () => {\n          log('STALKING...')\n          $.ajax({\n            type: 'GET',\n            url: '/catalog_status.php?where=task_id='.concat(task_id, '&rand=', Math.random()),\n            dataType: 'xml',\n            success: (xml) => {\n              log(xml)\n              const x = {\n                green: parseInt($(xml).find('wait_admin0').text(), 10) || 0,\n                blue:  parseInt($(xml).find('wait_admin1').text(), 10) || 0,\n                red:   parseInt($(xml).find('wait_admin2').text(), 10) || 0,\n              }\n              log(x)\n              const nWait = x.green + x.blue + x.red\n              $('#file-dropper').html(`waiting for ${nWait} tasks to run`)\n              if (!nWait) {\n                log('task(s) done!')\n                clearInterval(stalker_ptr)\n                $('#file-dropper').html('reloading page with your image')\n                location.href = location.href // ready! reload the page!\n              } else if (x.red) {\n                $('#file-dropper').html('<div class=\"alert alert-danger\">status task failure -- an admin will need to resolve</div>')\n                clearInterval(stalker_ptr)\n              }\n            },\n          })\n        }\n\n        // every 2 seconds, check for status\n        stalker_ptr = setInterval(stalker, 2000)\n      } else {\n        log(reply)\n      }\n\n      log('post done')\n      return ''\n    }\n\n\n    $('#file-selector').bind('click', () => {\n      AJS.file_picked = 'selected'\n    }).bind('change', (evt) => {\n      log('file dropdown selected!')\n      $('#file-submit, #file-cancel').show()\n      log(evt)\n      if (evt.target  &&  evt.target.files  &&  evt.target.files.length) {\n        [AJS.file2post] = evt.target.files\n        AJS.previewFile()\n      }\n    })\n\n\n    $('#file-dropper').bind('drop', (evt) => {\n      // we've been dropped a file (from a drag-and-drop)!\n      evt.stopPropagation()\n      evt.preventDefault()\n\n      log(evt.dataTransfer.files)\n      $('#file-dropper').removeClass('drag_over')\n\n      $('#file-submit, #file-cancel').show()\n\n\n      if (evt.dataTransfer.files.length) {\n        AJS.file_picked = 'dropped';\n        [AJS.file2post] = evt.dataTransfer.files\n        AJS.previewFile()\n      }\n    })\n\n\n    $('#poster').bind('focusin', (evt) => {\n      log(evt.type)\n      $('#file-uploading').show()\n    }).bind('submit', (evt) => {\n      log('submit!')\n      $('#file-uploading').show()\n\n      // First try the schmancy HTML5 submit via XMLHttpRequest and FileReader.\n      // If we fail, we'll fallback to form submit normal action.\n      const fail = uploadFile()\n      if (fail === '') {\n        // SUCCESS!  we are done!\n        success()\n        evt.stopPropagation()\n        evt.preventDefault()\n        return false\n      }\n\n      if (AJS.file_picked === 'dropped') {\n        // we had client drag-n-drop the file -- we can't post it!\n        // epic fail...\n        AJS.cancelFile()\n        // eslint-disable-next-line  no-alert\n        alert(`Failure: ${fail}`)\n        evt.stopPropagation()\n        evt.preventDefault()\n        return false\n      }\n\n      // OK fallback to normal (selected) file submit (and full page reload)!\n      return true\n    })\n\n\n    // now center file-dropper over current image\n    const w1 = $('#file-dropper-img').outerWidth()\n    const h1 = $('#file-dropper-img').outerHeight()\n    const w2 = $('#file-dropper').outerWidth()\n    const h2 = $('#file-dropper').outerHeight()\n    $('#file-dropper').css({\n      left: Math.round((w1 - w2) / 2),\n      top:  Math.round((h1 - h2) / 2),\n    })\n\n    if (AJS.ios) {\n      $('#file-dropper > form > div.hidden').removeClass('hidden')\n      $('#file-dropper > button').addClass('hidden')\n    }\n  }\n\n\n  // client-side preview the image directly in the browser!  xxx catch exceptions, etc.\n  static previewFile() {\n    $('#file-dropper .uppreview').remove() // remove any prior upload/preview\n\n    if (AJS.badFile()) {\n      AJS.cancelFile()\n      return false\n    }\n\n    if (typeof FileReader === 'undefined')\n      return false\n\n    const reader = new FileReader()\n    reader.onload = (evt) => {\n      log(evt.target)\n      const im = new Image()\n      im.src = evt.target.result\n      $('#file-dropper').append(im)\n      $(im).addClass('uppreview')\n      // $('#file-dropper').css(\n      //      {'background':'url(' + evt.target.result + ') no-repeat center center'})\n    }\n\n    log(AJS.file2post)\n    reader.readAsDataURL(AJS.file2post)\n    return true\n  }\n\n\n  static cancelFile() {\n    $('#file-dropper .uppreview').remove() // remove any prior upload/preview\n    $('#file-dropper, file-submit, #file-cancel, #file-uploading').hide()\n    if (AJS.file_picked)\n      delete AJS.file_picked\n    if (AJS.file2post)\n      delete AJS.file2post\n  }\n\n\n  static badFile() {\n    let fail = false\n\n    if (!fail  &&  !AJS.file2post)\n      fail = 'file is missing'\n\n    // php upload_max_filesize is 8M\n    if (!fail  &&  AJS.file2post.size > 8000000)\n      fail = 'file is over 8MB in size'\n\n    if (!fail) {\n      const type = AJS.file2post.type.toLowerCase()\n      if (type !== 'image/jpeg' && type !== 'image/png' && type !== 'image/gif')\n        fail = 'file not required format of JPEG or PNG or GIF'\n    }\n\n    if (fail)\n      // eslint-disable-next-line  no-alert\n      alert(fail)\n\n    return fail\n  }\n\n\n  // for microfilm books with many months of newspapers in PDF\n  //   eg: /details/la_caleagle_reel1\n  //\n  // paginfo is a logical hashmap JSON object of:\n  //   YYYYMMDD => [comma separated list of pages]\n  // eg:\n  //   20080129 =>  \"1,2,3,11,17\"\n  static drawPDF(identifier, pageinfo) {\n    const urlstart = '/download/'.concat(\n      identifier, '/',\n      identifier, '_pdf.zip/',\n      identifier, '_pdf/', identifier, '_',\n    )\n    let multi_year = false\n    let last_year  = false\n\n    // eslint-disable-next-line  guard-for-in\n    for (const key in pageinfo) {\n      const year = key.substr(0, 4)\n      if (last_year === false) last_year = year\n      if (last_year !== year) {\n        multi_year = true\n        break\n      }\n    }\n\n    const sep = ''\n    let str = sep\n    let lastyearmonth = 666\n    // eslint-disable-next-line  guard-for-in\n    for (const key in pageinfo) {\n      // log(key); log(pageinfo[key]);\n      const pages     = pageinfo[key].split(',')\n      const year      = key.substr(0, 4)\n      const month     = parseInt(key.substr(4, 2), 10)\n      const day       = parseInt(key.substr(6, 2), 10)\n      const yearmonth = year.concat('-', month)\n      let skip_day = false\n\n      let monthName = ''\n      if (yearmonth !== lastyearmonth) {\n        /**/ if (month ===  1)        monthName = 'January'\n        else if (month ===  2)        monthName = 'February'\n        else if (month ===  3)        monthName = 'March'\n        else if (month ===  4)        monthName = 'April'\n        else if (month ===  5)        monthName = 'May'\n        else if (month ===  6)        monthName = 'June'\n        else if (month ===  7)        monthName = 'July'\n        else if (month ===  8)        monthName = 'August'\n        else if (month ===  9)        monthName = 'September'\n        else if (month === 10)        monthName = 'October'\n        else if (month === 11)        monthName = 'November'\n        else if (month === 12)        monthName = 'December'\n        else if (month === undefined) monthName = 'Single Page PDFs'\n        else /*             */        monthName = 'Unknown_'.concat(month)\n\n        if (multi_year) monthName = year.concat(' ', monthName)\n\n        // make header/a that shows/hides a hidden div after it with the month's data\n        str += (str ? '</div><!--mo--><br/>' : '')\n        str += `\n<a href=\"#${monthName},${year}\" onclick=\"$('#m${yearmonth}').toggle(); return false\">\n<span class=\"iconochive-folder\" /> ${monthName}\n</a>\n<div class=\"mo\" id=\"m${yearmonth}\">`\n      }\n\n      // make header/a that shows/hides a hidden div after it with the page data\n      if ((day === undefined) || (day === '')) skip_day = true\n      if (skip_day) {\n        str += '<div class=\"day\">'\n      } else {\n        str += `\n<div class=\"day\">\n<a href=\"#${yearmonth}-${day}\"\n    onclick=\"$('#m${yearmonth}d${day}').toggle();return false;\">\n  <span class=\"iconochive-folder\" /> ${day}\n</a>\n<div class=\"pages\" id=\"m${yearmonth}d${day}\">`\n      }\n\n      // drop in the individual page links\n      let offset = 1\n      let page\n      let pnum\n      for (let j = 0; j < pages.length; j++) {\n        page = pages[j]\n        if (!page)\n          // eslint-disable-next-line  no-continue\n          continue\n        if (offset > 0) offset = 1 - page\n        pnum = parseInt(page, 10) + offset\n\n        // left 0-pad to 4 digits as needed\n        page = '0000'.concat(page)\n        page = page.substr(page.length - 4, 4)\n\n        const url = urlstart.concat(page, '.pdf')\n        str += `<a href=\"${url}\">[${pnum}]</a> `\n      }\n\n      if (skip_day)\n        str += '</div>'\n      else\n        str += '</div><!--pages--></div><!--day-->'\n\n      lastyearmonth = yearmonth\n    }\n\n    str += '</div><!--mo-->'\n\n    // replace the \"pdfs\" empty div with our hefty HTML\n    $('#pdfs .replaced').html(str)\n  }\n\n\n  // for collection pages, [About] tab\n  static grafs() {\n    const $grafs1 = $('#grafs1')\n    const $grafs2 = $('#grafs2')\n    if (!$grafs1.length)\n      return\n    if (typeof $grafs1.attr('data-id') === 'undefined')\n      return\n\n    const identifier = $grafs1.attr('data-id')\n    $grafs1.attr('data-id', null)\n\n    log('loading grafs')\n    $grafs1.html('<i><small>loading graph <img src=\"/images/loading.gif\"/></small></i>').show()\n    $grafs2.html('<i><small>loading graph <img src=\"/images/loading.gif\"/></small></i>').show()\n    const tok = '<h2>'\n    $.get('/details/'.concat(identifier, '&grafs=1&v=3'), (htm) => {\n      const a = htm.split(tok)\n      if (a.length >= 3) {\n        $('#activity-reviewsN').html(a[1]).parents('.activity-box').show()\n        $('#activity-forumN  ').html(a[2]).parents('.activity-box').show()\n      }\n      if (a.length === 5) {\n        $grafs1.html(tok + a[3])\n        $grafs2.html(tok + a[4])\n      } else {\n        $grafs1.html('(graph data not available)')\n        $grafs2.html('(graph data not available)')\n      }\n    })\n\n    AJS.setUpTopRegionsTable()\n  }\n\n\n  static quick_down(id, target) {\n    const idsel = `#${id}`\n\n    if (!$('.format-group.in').length) {\n      // no set of files for a single format showing... yet!\n      const format = $(target).text()\n      const $formatGroup = $(idsel).parents('.format-group')\n\n      $('.download-button').html(format.concat(' FILES'))\n      $formatGroup.addClass('in')\n      // hide the other summary formats (one-liner) clickables\n      $('.format-group:not(.in)').slideUp()\n      $(idsel).slideDown()\n    } else {\n      // re-open all the summary formats (one-liner) clickables\n      $('.format-group').slideDown(400)\n      // close the open set of single files\n      setTimeout(() => { // ftw, thx for nothing jquery\n        $('.format-group.in').removeClass('in')\n        $('.download-button').html('DOWNLOAD OPTIONS')\n      }, 400)\n      $(idsel).slideUp()\n    }\n\n    return false\n  }\n\n\n  // parse a CGI arg\n  static arg(theArgName, try_full) {\n    const sArgs = (try_full  &&  location.search === '' ?\n      location.href.slice(1).split('&') :\n      location.search.slice(1).split('&'))\n    for (let i = 0; i < sArgs.length; i++) {\n      if (sArgs[i].slice(0, sArgs[i].indexOf('=')) === theArgName) {\n        const r = sArgs[i].slice(sArgs[i].indexOf('=') + 1)\n        return (r.length > 0 ? unescape(r).split(',') : '')\n      }\n    }\n    return ''\n  }\n\n  // setup trigger on 1/2 second of hovering over the nav IA logo\n  static logoText() {\n    const hideLogoText = () => {\n      $('#internet-archive').fadeOut('slow', () => {\n        $('#internet-archive').remove()\n        $('#exit-er').show()\n      })\n    }\n\n    let mousetimer = false\n\n    // axxx make sure when it opens on TAB, the about li is in the DOM *next*\n    $('.navbar-nav:first').on('mouseenter focusin', (evt) => {\n      // Only proceed if user is interacting with the logo elements.\n      if (!$(evt.target).is('ul, .navbar-brand, .iconochive-logo, .logo-text-hider'))\n        return\n\n      mousetimer = setTimeout(() => {\n        if ($('#internet-archive').length) {\n          hideLogoText()\n          return\n        }\n\n        $('#exit-er').hide() // (gets in the way of xs/mobile!)\n        // flank the IA logo!\n        $('.navbar-nav:first').prepend($(`\n<div id=\"internet-archive\" class=\"hidden-xs logo-text-hider\"\n  style=\"position:absolute; top:10px; width:100%; text-align:center;\">\n<div class=\"topinblock logo-text-hider\" style=\"width:100px; padding-left:10px;\">\n  <div class=\"logo-text-hider\"\n      style=\"display:none; width:85px; height:30px; background:transparent -35px top no-repeat url(/images/footer.png)\" />\n</div><div class=\"topinblock logo-text-hider\" style=\"width:35px;height:1px;\" /><div class=\"topinblock logo-text-hider\" style=\"width:100px;\">\n  <div class=\"logo-text-hider\" style=\"display:none; width:85px; height:30px; background:transparent -116px top no-repeat url(/images/footer.png)\" />\n</div>\n</div>`))\n\n        // both of the above divs are hidden.  now fade them in\n        $('#internet-archive > div > div').fadeIn('slow')\n      }, 1000)\n    }).mouseleave(() => {\n      if (mousetimer) clearTimeout(mousetimer)\n    })\n  }\n\n  static scrolled() {\n    const newtop = $(window).scrollTop()\n    // log('scrolled to ', newtop)\n\n    const selector = '.more_search:visible'\n    const $e = $(selector)\n    if (!$e.length)\n      return\n\n    // make the edge detect for \"hit bottom\" 40 pixels from the bottom\n    const check = (($e.offset().top + $e.outerHeight()) - $(window).height()) - 40\n    // log('-v- check', check)\n    if (newtop > check) {\n      log('hit rock bottom > ', check)\n      if (!AJS.more_searching)\n        $(selector.concat(' > a')).click()\n    }\n  }\n\n\n  static more_search(lnk, urlIn, page_now) {\n    const selector = AJS.selector()\n    if (selector === false)\n      return false\n\n    const ikind = selector.replace(/#ikind-/, '')\n\n    const $more_search = $(selector.concat(' .more_search'))\n\n    // we stash a reference of what page the client has requested, so we can increment it on\n    // each \"more_search hit\n    const pageKey = selector\n    if (typeof AJS.page_map[pageKey] === 'undefined')\n      AJS.page_map[pageKey] = (page_now || 1)\n\n    if (AJS.page_map[pageKey] < 0) {\n      // $more_search.find('.more-search-all').show()\n      return false // all results showing -- no more for the ikind avail so noop/ignore\n    }\n\n    AJS.page_map[pageKey] += 1\n    const page = AJS.page_map[pageKey]\n\n    $more_search.find('.more-search-fetching').show()\n\n    AJS.more_searching = true\n\n    let url = urlIn + page\n    const urlreplace = location.protocol.concat('//', location.host, url)\n    url += '&scroll=1'\n\n    log('url: ', url)              // url to AJAX get next page\n    log('urlreplace', urlreplace)  // url to change browser location (visually) to\n\n\n    log('more_search(selector=', selector, 'sort=', ikind, 'page=', page, 'url=', url, ')')\n    // log(AJS.page_map)\n\n\n    $.get(url, (htm) => {\n      if (htm.length < 100  &&  $(htm).find('div.no-results')) {\n        // no more results avail/found.  we have reached infinity!\n        $more_search.find('.more-search-fetching, a.btn').hide()\n        // $more_search.find('.more-search-all').show()\n        AJS.page_map[pageKey] = -1 // flag to ignore future more_search attempts\n        AJS.more_searching = false\n        return\n      }\n\n      if (AJS.pushState  &&  typeof history.replaceState !== 'undefined')\n        history.replaceState({}, '', urlreplace)\n\n\n      const selectorID = $(selector).attr('id')\n      if (AJS.tilerPREV  &&  AJS.tilerPREV.unsourced  &&  AJS.tilerPREV.unsourced[selectorID])\n        delete AJS.tilerPREV.unsourced[selectorID]\n\n\n      const $selector = $(selector.concat(' .results'))\n      $selector.append(AJS.addNotes(AJS.addingNotesKind, htm))\n\n      // re-tile and re-flow!  (the force should flow through you)\n      AJS.tiler(selector)\n      $more_search.find('.more-search-fetching').hide()\n      AJS.more_searching = false\n\n      AJS.parent_hover($selector)\n\n\n      // OK, this is quite a bit more subtle...  the HTM has been dropped in,\n      // *and* we've done a basic re-tiling.  however, it's very likely many\n      // of the images are still loading.  so listen for image \"is loaded\" events\n      // if they trickle in, and at most re-tile every 1 second (even if they\n      // likely trickling in at a faster rate than that) until they all loaded\n      $(selector.concat(' img')).on('load', () => {\n        clearTimeout(AJS.more_search_throttler)\n        AJS.more_search_throttler = setTimeout(AJS.tiler, 1000)\n      })\n\n\n      if (typeof archive_analytics !== 'undefined')\n        archive_analytics.send_scroll_fetch_event(page)\n    })\n\n    return false\n  }\n\n\n  // when embed codes are being shown, adjust their heights so they show all the content/codes!\n  static embed_codes_adjust() {\n    log('showing embeds!')\n\n    // these are found (only) on /details/ pages\n    for (const embid of ['embedcodehere', 'embedcodehereWP']) {\n      const $embid = $(`#${embid}`)\n      $embid.removeAttr('rows').css('height', '')\n\n      const embtxt = $embid.text()\n\n      // this is *puke* city -- since textareas are a PITA, make a shadow div w/ the\n      // text we want in it, trying to be same width, same font-size, etc.\n      // and *then* insert into DOM invisibily so we can calculate its overall height\n      // .. and then peg the textarea height to that height\n      $('body').prepend($('<div/>').attr({\n        id: `${embid}Shadow`,\n        class: 'textarea-invert-readonly roundbox5',\n      }).css({\n        position: 'absolute',\n        visibility: 'hidden',\n        top: 60,\n        left: 10,\n        padding: '5px 15px 5px 15px',\n        width: $embid.width(),\n        'font-size': $embid.css('font-size'),\n      })\n        .text(embtxt))\n\n      const bestHT = $(`#${embid}Shadow`).outerHeight() + 15\n      log(embid, 'bestie height', bestHT, 'for current width', $embid.width())\n      $(`#${embid}Shadow`).remove()\n\n      $embid.height(bestHT)\n    }\n  }\n\n\n  /**\n   * A simpler 'one shot' way to dynamically insert a modal and show it on the page.\n   * You can call it w/ a hashmap of optional paramters to make it very easy on caller end to grok\n   * (similar to python's kwargs)\n   *\n   * @param  {String} [prepend='body']        a jQuery selector where to prepend the modal markup\n   * @param  {String} [selector='#my-modal']  a unique id -- is _first_ remove(d), and then added\n   * @param  {String} [title='confirmed']     what title/header should appear\n   * @param  {String} [body='']               text/markup for the modal body\n   * @return n/a\n   */\n  static modal({\n    prepend = 'body',\n    selector = '#my-modal',\n    title = 'confirmed',\n    body = '',\n  } = {}) {\n    const id = selector.replace(/#/, '')\n    $(selector).remove()\n    $(prepend).prepend(`\n<div id=\"${id}\" class=\"modal fade\" role=\"dialog\" aria-hidden=\"true\">\n<div class=\"modal-dialog modal-lg\">\n  <div class=\"modal-content\" style=\"padding:10px;\">\n    <div class=\"modal-header\">\n      <button\n        type=\"button\"\n        class=\"close\"\n        data-dismiss=\"modal\"\n        aria-hidden=\"true\">\n        <span class=\"iconochive-remove-circle\" aria-hidden=\"true\"></span><span class=\"sr-only\">remove-circle</span></button>\n      <h3 class=\"modal-title\">${title}</h3>\n    </div>\n    <div id=\"${id}-body\">${body}</div>\n  </div>\n</div>\n</div>`)\n    $(selector).modal('show')\n  }\n\n\n  // dynamically adds modal to page (if isnt there already)\n  static _modal_add(selector, conf) { // logically private\n    log(conf)\n\n    if ($(selector).length)\n      return\n\n    const selectorID = selector.replace(/#/, '')\n\n    $('body').prepend(`\n<div id=\"${selectorID}\" class=\"modal fade\" role=\"dialog\" aria-hidden=\"true\">\n<div class=\"modal-dialog modal-lg\">\n  <div class=\"modal-content\">\n    <div class=\"modal-header ${conf.headerClass ? conf.headerClass : 'modal-header-std'}\">\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n        <span class=\"iconochive-remove-circle\"></span>\n      </button>\n      <h2 class=\"modal-title\">\n        ${typeof conf.title === 'undefined' ? 'Confirmed' : conf.title}\n      </h2>\n    </div>\n    <div id=\"${selectorID}-body\">\n      ${typeof conf.body === 'undefined' ? '' : conf.body}\n    </div>\n  </div>\n</div>\n</div>`)\n\n    // $('body').addClass('blurry') // exxxperiment!\n  }\n\n\n  static modal_beta(lnk, confIn) { // NOTE: not in use now\n    const conf = confIn\n    conf.title = '<center>Give Us Feedback!</center>'\n\n    // Set a cookie *NOW* w/ JS -- so we can absolutely assure that if user hits\n    // the exit form *WITHOUT* cookies, that they must be disabling cookies on archive.org\n    // (but interestingly have JS enabled (since they are here! ;-))\n    // So exit form can give them \"you need to enable cookies\" fail...\n    $.cookie('beta-modal', 'open', { path: '/', expires: 1, domain: '.archive.org' })\n\n    const selector = $(lnk).attr('data-target')\n    conf.href = location.href\n    conf.href = conf.href.replace(/&ui3=1$/, '')\n    conf.href = conf.href.replace(/\\/v2$/,  '')\n\n    conf.body = `\n<style> #fback h4 { margin-top:30px; } </style>\n<div id=\"fback\" style=\"padding:20px\">\n  <a target=\"_blank\" href=\"/details/v2tour20150420\">\n    <div style=\"text-align:center; float:right\">\n      <img src=\"/download/v2tour20150420/v2tour20150420.thumbs/April202015Tour_000375.jpg\"/><br/>\n      TUTORIAL VIDEO\n    </div>\n  </a>\n  <div style=\"font-size:18px\">\n    Please take a moment to give us feedback below.\n    We consider these comments as we make changes to the site.\n  </div>\n  <h5 style=\"display:none\">\n    <br/><br/><br/>\n    THANK YOU for your valuable feedback!\n  </h5>\n  <form id=\"modal_beta_form\" method=\"POST\" action=\"/services/exit.php\">\n    <input type=\"hidden\" name=\"feedback_only\" value=\"1\"/><br/>\n\n    <h4>Feedback (details are helpful):</h4>\n    <textarea class=\"form-control input-sm\" name=\"feedback\" rows=\"4\"></textarea>\n\n    <h4>May we contact you about your feedback?</h4>\n    <input type=\"radio\" name=\"contact\" value=\"yes\"/> yes, here's my email address:<br/>\n    <input class=\"form-control input-sm\" type=\"text\" name=\"eml\"/> <br/>\n    <input type=\"radio\" name=\"contact\" value=\"no\"/> no<br/>\n    <hr style=\"border-color:black;background-color:black;color:black\" />\n    You can use the classic version of archive.org for a limited period of time.<br/>\n    <a target=\"_blank\" href=\"https://blog.archive.org/2014/11/05/redesign/\">\n      Learn more\n    </a>\n    about why archive.org changed.<br/>`\n\n    if (conf.feedback_only) {\n      conf.body += `\n        <input class=\"btn btn-primary\" type=\"submit\" style=\"margin-top:20px\" value=\"Submit\"/>`\n    } else {\n      conf.body += `\n        <input class=\"btn btn-primary\" type=\"submit\" style=\"margin-top:20px\" value=\"Submit Feedback\"/>\n        <input id=\"modal_beta_form_exit\" class=\"btn\" type=\"button\" style=\"margin-top:20px\" value=\"Exit to Classic Site\"/>`\n    }\n    conf.body += `\n    <br/><br/>\n    <i>What's New?</i>\n    [\n      <a target=\"top\" href=\"https://blog.archive.org/2015/02/12/whats-new-with-v2/\">recent changes</a> |\n      <a target=\"top\" href=\"/CHANGELOG.txt\">detailed CHANGELOG</a>\n    ]\n  </form>\n</div>`\n\n\n    AJS._modal_add(selector, conf)\n\n    // in case it's not obvious, there are FOUR CASES we (have to) handle:\n    //   feedback only, hit [submit] button\n    //   feedback only, cancel out (no feedback given)\n    //   exit beta, hit [submit] button\n    //   exit beta, no feedback given\n    $('#modal_beta_form_exit').on('click', () => {\n      $('#modal_beta_form input[name=feedback_only]').val(0)\n      conf.feedback_only = false\n      conf.exiting = true\n      $('#modal_beta_form').submit()\n    })\n\n\n    $('#modal_beta_form').on('submit', () => {\n      log('submit clicked!')\n\n      conf.submitted = true\n      conf.postdata = $('#modal_beta_form').serialize() // oh, fkya!\n\n      // we're polite\n      $(selector.concat(' h5')).fadeIn('slow')\n      $(selector.concat(' form')).fadeOut('slow')\n\n\n      setTimeout(() => {\n        // AJAX form post, keeping page where it is\n        $.post('/services/exit.php', conf.postdata, () => {\n          log('POSTED ', conf.postdata)\n\n          if ((!conf.feedback_only  ||  conf.exiting)  &&  document.cookie === '') {\n            // user disables cookies, so go directly to exit form where we'll\n            // give them more information about that and how we can't \"stick\"\n            // their preference to exit beta...\n            log('EXITING BUT HAS NO COOKIES!')\n            location.href = '/services/exit.php'\n            return\n          }\n\n          $('body').removeClass('blurry')\n          $(selector).modal('hide')\n        })\n      }, 2500)\n\n      return false // dont do *normal* submit of the form (and drive the page away)\n    })\n\n\n    $(selector).modal('show').on('hidden.bs.modal', () => {\n      log('beta modal hidden')\n\n      $('body').removeClass('blurry')\n      if (conf.feedback_only  ||  !conf.exiting) {\n        $(selector).remove()\n        return\n      }\n\n      const exitFN = () => {\n        if (!conf.submitted) {\n          // user clicked out of modal or [x] close button -- no form submit\n          // but they DO want to exit beta...\n          location.href = '/services/exit.php'\n        } else {\n          $(selector).remove()\n          log('going to ', conf.href)\n          location.href = conf.href\n        }\n      }\n\n\n      if (typeof archive_analytics !== 'undefined') {\n        archive_analytics.send_ping({\n          kind: 'event',\n          ec: 'in_beta',\n          ea: 'exit',\n          cache_bust: Math.random(),\n        }, exitFN) // once analytics GIF is loaded, invoke our callback!\n      } else {\n        log('uho analytics not defined!')\n        // should never happen, but just to be safe!!\n        exitFN()\n      }\n    })\n    return false\n  }\n\n\n  /**\n   * Parse API data and check if the item is successfully marked to favorite or not\n   *\n   * @param {String} bookmarkRes response data from /bookmarks.php?add_bookmark=1&...\n   * @return {Boolean}\n   */\n  static isFavoriteSuccessful(bookmarkRes) {\n    return (bookmarkRes.indexOf('<meta name=\"ia-favorite-success\" content=\"1\">') !== -1)\n  }\n\n  // gives us ability to have JS intercept an href click and instead do a bootstrap modal.\n  // eg: when someone Favorites a list or item - a kind of confirmation box.\n  //     In that case, we want it to just say Favorited with a big black star in the middle.\n  //     We don't take user to the href target.\n  //     The modal disappears if the user clicks anywhere and returns to page they were on.\n  //     Timeout of a few seconds to close modal if they do nothing.\n  // config is a hashmap with optional keys:\n  //   auto_close, auto_remove, body, center, favorite, ignore_lnk, titlen,\n  //   headerClass, shown, follow_link_on_dismiss\n  static modal_go(lnk, confIn) {\n    const conf = confIn // sigh\n\n    if (conf.favorite) {\n      // this flicks on a bunch of config options\n      conf.center = true\n      conf.auto_close = true\n      conf.title = 'Favorited'\n      conf.body = '<center><span style=\"font-size:100px;\" class=\"iconochive-favorite\"></span></center>'\n      conf.login = true // must be logged in!\n    }\n\n    const selector = $(lnk).attr('data-target')\n    const href     = $(lnk).attr('href')\n\n    AJS._modal_add(selector, conf)\n\n\n    if (conf.shown) {\n      $(selector).on('shown.bs.modal', () => {\n        conf.shown()\n      })\n    }\n\n    if (conf.follow_link_on_dismiss) {\n      $(selector).on('hidden.bs.modal', () => {\n        log('modal hidden, going to ', href, '..')\n        $('body').removeClass('blurry')\n        location.href = href\n      })\n    }\n\n\n    $(selector).modal('show')\n\n\n    if (conf.login  &&  $.cookie('logged-in-user') === null) {\n      if (location.protocol !== 'https:') {\n        // make absolutely sure we never login with http!\n        location.href = 'https://archive.org/account/login.php'\n        return false\n      }\n      const url = '/account/login.php'\n      $.get(url, (htmIn) => {\n        $(selector.concat(' .modal-title')).text('Nearly there!  Please login first')\n\n        $(selector).modal('show')\n        // this allows us to effectively rip off the header/nav and footer\n        // if we are accessing a full page (eg: account login page)\n        const htm = ($(htmIn).find('.container-ia > div').length ?\n          $(htmIn).find('.container-ia > div').get(0) :\n          htmIn\n        )\n\n        $(selector.concat('-body')).html(htm)\n\n        const $form = $(selector.concat('-body form:has(input[type=submit])'))\n\n        if ($form.length) {\n          $form.on('submit', (evt) => {\n            evt.preventDefault()\n            evt.stopPropagation()\n\n            const keyvals = {}\n            $form.find('input').each((k, v) => {\n              if ($(v).attr('name').length)\n                keyvals[$(v).attr('name')] = $(v).val()\n            })\n            // log('POST', url)\n            // log(keyvals)\n            $.post(url, keyvals, () => {\n              log('SUBMITTED')\n              if ($.cookie('logged-in-user') !== null) {\n                // SUCCESS!\n                // We are going to hide the login modal now, and need\n                // to proceed only *after* the modal animation is done\n                // and modal is gone.  So setup listener now, *then* hide.\n                // Once login modal is gone, remove the modal, and\n                // invoke the originally intended modal in fresh environment!\n                $(selector).on('hidden.bs.modal', () => {\n                  $(selector).remove()\n                  log('SUCCESS')\n                  AJS.modal_go(lnk, conf) // invoke original modal!\n                })\n                $('body').removeClass('blurry')\n                $(selector).modal('hide')\n              } else {\n                // eslint-disable-next-line  no-alert\n                alert('Please try logging in again')\n              }\n            })\n\n            return false\n          })\n        }\n      })\n      return false\n    }\n\n\n    if (conf.auto_remove) {\n      conf.auto_close = true\n      $(selector).on('hidden.bs.modal', () => {\n        $(selector).remove()\n        $('body').removeClass('blurry')\n      })\n    }\n\n\n    if (!conf.ignore_lnk) {\n      const url = lnk.href\n      // log('submit', url)\n      $.get(url, (res) => {\n        if (conf.favorite) {\n          if (typeof archive_analytics !== 'undefined') {\n            archive_analytics.send_ping({\n              kind: 'event',\n              ec: 'page_action',\n              ea: 'favorite',\n              el: location.pathname,\n              cache_bust: Math.random(),\n            })\n          }\n\n          if (AJS.isFavoriteSuccessful(res)) {\n            $('#favorite-button').addClass('favorited')\n          } else {\n            const $favModal = $(selector)\n            const failMessage = `\n              <center>\n                <p class=\"favorite-failure-message\">\n                  There was an error adding the favorite. If the problem persists, please contact support.\n                </p>\n              </center>\n            `\n\n            $favModal.find('.modal-title').html('Failed')\n            $favModal.find('#confirm-modal-body').html(failMessage)\n          }\n        }\n\n        $(selector).modal('show')\n        if (conf.auto_close)\n          setTimeout((() => $(selector).modal('hide')), 2000)\n      })\n    } else {\n      $(selector).modal('show')\n    }\n\n    if (conf.center)\n      $(selector.concat(' .modal-dialog')).center() // vertically center\n\n    if (conf.auto_close  &&  conf.ignore_lnk)\n      setTimeout(() => $(selector).modal('hide'), 2000)\n\n    return false\n  }\n\n\n  // handy little method to ensure only 1 checkbox is checked\n  static check1(obj, selector) {\n    if (!obj.checked)\n      return\n\n    // toggle others to unchecked\n    const $selector = (selector ? $(selector) : $(obj).parents('form'))\n\n    // uncheck all; the re-check the checked one\n    $selector.find('input[type=checkbox]').attr('checked', false)\n\n    // eslint-disable-next-line  no-param-reassign\n    obj.checked = true\n  }\n\n\n  static addCommas(nStr) {\n    // http://www.mredkj.com/javascript/numberFormat.html\n    const x = (`${nStr}`).split('.')\n    let x1 = x[0]\n    const x2 = x.length > 1 ? '.'.concat(x[1]) : ''\n    const rgx = /(\\d+)(\\d{3})/\n    while (rgx.test(x1))\n      x1 = x1.replace(rgx, '$1,$2')\n    return x1 + x2\n  }\n\n\n  static suffixFmt(val, axis) {\n    if (axis.min >= 0.0  &&  axis.max <= 5)\n      // give a little bit more granularity of 1 decimal point...\n      return Math.round(val * 10, 1) / 10\n\n    if (val >= 1000000) return (val / 1000000).toFixed(0).concat(' M')\n    if (val >=    1000) return (val /    1000).toFixed(0).concat(' K')\n    return val.toFixed(0)\n  }\n\n\n  static suffixFmtPercent(val, axis) {\n    return AJS.suffixFmt(val, axis).concat('%')\n  }\n\n\n  static descript() {\n    const d = $('#descript').get(0)\n    if (d  &&  d.offsetHeight < d.scrollHeight) {\n      // we overflowed the short descript at the top of the collection page.\n      // so show the little MORE button..\n      $('#descript-more').show()\n      // $('#descript').css({'border-bottom':'1px solid #ccc'})\n    }\n  }\n\n\n  // this allows easy setup for resize/orientation triggers for all graphs\n  // on a page that use this!\n  static plotter(callback) {\n    if (typeof AJS.plotters === 'undefined')\n      AJS.plotters = []\n\n    if (callback) {\n      // stash a copy of the callback for resize/orientationchange triggers\n      AJS.plotters.push(callback)\n\n      // now do the actual plotting (eg: page load)\n      callback()\n    } else {\n      // step through each graph and rerun them\n      log('plotter() resize/orient change', AJS.plotters.length, 'graphs to resize')\n      for (let i = 0; i < AJS.plotters.length; i++)\n        AJS.plotters[i]()\n    }\n  }\n\n\n  // Graphing for archive.org/services/views.php and TV\n  static plot(id, cfgIn, fmt_fn, pts, many) {\n    const cfg = cfgIn\n    if (!cfg.xaxis)\n      cfg.xaxis = { mode: 'time', color: (cfg.dark ? '#ccc' : '#545454') }\n    if (!cfg.yaxis)\n      cfg.yaxis = { color: (cfg.dark ? '#ccc' : '#545454') }\n\n    let barWidth\n    if (many && cfg.barWidth)\n      barWidth = cfg.barWidth * 1 // *1 to pass lint; keeps like below; avoid obj destructuring\n    else if (cfg.barWidth)\n      barWidth = cfg.barWidth * 86400 * 1000\n    else\n      barWidth = (cfg.dayBarsNoPoints ? 1 : 7) * 86400 * 1000 // 1day|1week\n\n    cfg.series = {\n      bars: {\n        show: true,\n        barWidth,\n        fill: 0.6,\n        color: '#385C74',\n      },\n      color: '#385C74',\n      points: { show: !cfg.dayBarsNoPoints },\n    }\n\n    if (typeof cfg.grid === 'undefined') {\n      cfg.grid = {\n        borderColor: (cfg.dark ? '#333' : '#aaa'),\n        hoverable: true,\n      }\n    }\n    // log(cfg.series.bars)\n\n\n    if (cfg.dark)\n      cfg.grid.backgroundColor = '#002b36'\n\n    if (!cfg.tip)\n      cfg.tip = {}\n    if (!cfg.tip.id)\n      cfg.tip.id = id\n\n    if (typeof window.GraphPriorIndex === 'undefined')\n      window.GraphPriorIndex = {}\n\n    // eslint-disable-next-line  no-nested-ternary\n    const ary = (many ? pts : (typeof pts.data === 'undefined' ? [{ data: pts }] : [pts]))\n    if (cfg.dayBarsNoPoints  &&  !cfg.noLabel)\n      ary[0].label = id\n\n    const selid = `#${id}`\n    $.plot($(selid), ary, cfg)\n\n    if (!fmt_fn)\n      return\n\n    $(selid).bind('plothover', (event, pos, item) => {\n      if (!item) {\n        window.GraphPriorIndex[id] = -666\n        $('#gtip').remove()\n        return\n      }\n      if (window.GraphPriorIndex[id] !== item.dataIndex) {\n        window.GraphPriorIndex[id] = item.dataIndex\n        $('#gtip').remove()\n\n        const str = fmt_fn(item.datapoint[0], item.datapoint[1])\n        const $graf = $(selid)\n        const off = $graf.offset()\n\n        // figure out which way from the \"dot\"/bar in the graph the\n        // tooltip should go -- left or right!\n        let { pegTo } = cfg.tip\n        if (!pegTo)\n          pegTo = ((pos.pageX - off.left) > ($graf.width() / 2) ? 'right' : 'left')\n\n        const pegToVal = (pegTo === 'right' ?\n          ($graf.width() - (pos.pageX - off.left - 20)) :\n          (pos.pageX - off.left) + 20)\n        log(pegTo, pegToVal)\n\n        $(`#${cfg.tip.id}`).append(`\n<div id=\"gtip\" class=\"roundbox2\"\nstyle=\"top:${pos.pageY - off.top}px; ${pegTo}:${pegToVal}px\">${str}</div>`)\n      }\n    })\n  }\n\n\n  // Use a color sampling 3rd party piece of code, to find the 1st/primary image in the \"welcome\"\n  // area, and find the \"dominant color\".  (internally, uses canvas to color sample).\n  // Adjust text/foreground color as well as any \"selected tab\" background color.\n  // NOT USED ANYMORE -- GONE SERVERSIDE!\n  static welcome_recolor(e) {\n    if (typeof ColorThief === 'undefined'  ||  !e.length)\n      return\n\n    if (AJS.welcome_recolored)\n      return\n    AJS.welcome_recolored = true\n\n    const img = $(e)[0]\n    log('welcome_recolor', img.src)\n\n    /* global ColorThief */\n    const ct = new ColorThief()\n    const palette = ct.getPalette(img, 5)\n    log(palette)\n    if (!palette)\n      return\n    const dominantColorRGB = palette[0] // 3 element array!\n\n    if (!dominantColorRGB)\n      return\n    log(dominantColorRGB)\n\n    // if dominant color is uh, kinda in the lighter range -- txt should be black\n    const avgVal =\n      Math.round($(dominantColorRGB).map((k, v) => v).toArray().reduce((a, b) => a + b) /\n        dominantColorRGB.length)\n    const color = (avgVal >= 128 ? 'black' : 'white')\n    log('avgVal', avgVal)\n\n    $('.welcome').css({\n      color,\n      'background-color': `rgb(${dominantColorRGB.join(',')})`,\n    })\n    $('.welcome .stealth:not(.tabby .stealth)').css({ color })\n  }\n\n\n  /**\n   * Use the following function to make an image, div, etc focusable, and 'click'-able.\n   * Function adds a tabindex for 'focus' and listens for a keydown/keypress of enter or space,\n   * then triggers a click.\n   *\n   * var element: String used for jquery capture of non-acessible & mouse-only element.\n   *    ex: \"#AmazonPayButton img\"\n   * Triggers 'click' on element.\n   */\n  static makeMouseElementAccessible(element) {\n    $(element).attr('tabindex', '0').on('keypress keydown', function makeMouseElementAccessibleGo(e) {\n      if (e.type !== 'click') {\n        const code = (e.keyCode || e.which)\n        const k_space = 32 // space bar pressed\n        const k_enter = 13 // enter key pressed\n        if ([k_space, k_enter].indexOf(code) !== -1)\n          $(this).click()\n      }\n    })\n  }\n\n\n  // use something like ',' for the optional 3rd arg if you want to allow\n  // for appending 2+ values into a field, etc...\n  static autocomplete(selector, options, multiValSplitChar) {\n    $(selector).autocomplete({\n      appendTo: '#autocompletee',\n      minLength: 0,\n      source: (request, response) => {\n        // delegate back to autocomplete, but extract the last term\n        response($.ui.autocomplete.filter(options, request.term.split(/,\\s*/).pop()))\n      },\n      focus: () => false, // prevent value inserted on focus\n      select: function autocomplete_select(event, ui) {\n        if (multiValSplitChar) {\n          const terms = this.value.split(/,\\s*/)\n          // remove the current input\n          terms.pop()\n          // add the selected item\n          terms.push(ui.item.value)\n          // add placeholder to get the comma-and-space at the end\n          terms.push('')\n          this.value = terms.join(', ')\n        } else {\n          this.value = ui.item.value\n        }\n        return false\n      },\n    })\n  }\n\n\n  static addNotes(kind, htm) {\n    // flag lists have multiple users so the \"rights\" there\n    // is a bit to thorny right now so for simplicity and\n    // the main feature to go live, skipping them...\n    if (kind !== 'favorite'  &&  kind !== 'list')\n      return htm\n\n    if (!htm  &&  $('body').hasClass('editable'))\n      AJS.addingNotesKind = kind\n    if (!AJS.addingNotesKind)\n      return htm\n\n    AJS.addNoteHTM = $(`\n<div class=\"note\">\n  <span class=\"edit\">\n    <a href=\"#\" onclick=\"return AJS.editNote(this)\">Add a Note</a>\n  </span>\n</div>`)\n\n    log('addNotes')\n\n    // Next, we are going to do a global DOM search and insert (where needed)\n    // for basically the first page load.  But we're also called in \"infinite scroll\"\n    // page 2+ mode, and in that case, we want to modify (JUST) the HTM when that's\n    // for page 2+ and about to be inserted into the DOM, *instead* of another global\n    // DOM search.\n    if (htm) {\n      // (Basically we are now doing page 2+ in infinite scroll)\n      // OK this is sorta wild/maybe not obvi...a\n      // (Kinda like a jQuery replace_regexp()...)\n      // Take the *string* of HTM we are passed, convert it to a \"findable\" jQuery object\n      // then insertd \"addNoteHTM\" where needed.\n      // Finally, convert back to string and return this modified version to caller.\n      const $htm = $(`<div>${htm}</div>`)\n      $htm.find('.details-ia .C234:not(:has(\".note\"))').append(AJS.addNoteHTM)\n      return $htm.html()\n    }\n\n    // this is initial page load\n    // NOTE: return value irrelevant here\n    return $('.details-ia .C234:not(:has(\".note\"))').append(AJS.addNoteHTM)\n  }\n\n\n  static editNote(e) {\n    const $e = $(e)\n    const identifier = $e.parents('.details-ia').prev().attr('data-id')\n    if (!identifier)\n      return false\n\n    const $note = $e.parents('.note')\n\n    let val = ''\n    if ($e.text() === 'edit') {\n      val = $note.find('span:first').text()\n      val = val.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    }\n    $note.hide()\n    $note.parent().append($(`\n<form class=\"form form-horizontal note\" role=\"form\" onsubmit=\"AJS.editedNote(this);return false\">\n  <div class=\"form-group\">\n    <div class=\"col-xs-2 col-md-1 col-lg-1\">\n      <b>Note:</b>\n    </div>\n    <div class=\"col-xs-10 col-md-6 col-lg-7\">\n      <textarea class=\"form-control\" name=\"comments\">${val}</textarea>\n      <div class=\"clearfix visible-xs-block\"></div>\n    </div>\n    <div class=\"clearfix visible-xs-block\"></div>\n    <div class=\"col-xs-12 col-md-5 col-lg-4 btns\">\n      <button type=\"button\" onclick=\"AJS.editedNote(this)\" class=\"btn btn-success btn-xs\">Save</button>\n      <button type=\"button\" onclick=\"AJS.editedNote(this)\" class=\"btn btn-info btn-cancel btn-xs\">Cancel</button>\n      <button type=\"button\" onclick=\"AJS.editedNote(this)\" class=\"btn btn-danger btn-xs ${val ? '' : 'hidden'}\">Remove</button>\n    </div>\n  </div>\n</form>`))\n\n    return false\n  }\n  static editedNote(e) {\n    let $e = $(e)\n\n    const identifier = $e.parents('.details-ia').prev().attr('data-id')\n    if (!identifier)\n      return\n\n    // if user hit [return] and submitted form, etc.\n    // treat it like they hit the [Save] button\n    if ($e.is('form'))\n      $e = $e.find('button:contains(\"Save\")')\n\n    const action = $e.text()\n    const $parent = $e.parents('.note')\n    const $origNote = $parent.prev()\n\n    if (action === 'Save'  ||  action === 'Remove') {\n      const val  = (action === 'Save' ? $parent.find('textarea').val() : '')\n      const  url = '/bookmarks.php?identifier='.concat(\n        identifier, '&kind=', AJS.addingNotesKind,\n        '&add_comment=', encodeURIComponent(val),\n      )\n      log('get ', url)\n      $.get(url, () => {\n        const htm = (val ?\n          `Note: \"<span>${val.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</span>\"\n          <span class=\"edit\">(<a href=\"#\" onclick=\"return AJS.editNote(this)\">edit</a>)</span>` :\n          AJS.addNoteHTM.html())\n        // show the \"Note: ...\" section again (with now appropriately updated innards)\n        $origNote.html(htm).show()\n        $parent.remove() // lose the form\n      })\n      return\n    }\n    // else Cancel does nothing but below...\n\n    $origNote.show() // show the \"Note: ...\" section again\n    $parent.remove() // lose the form\n  }\n\n\n  static thumbzilla(id) {\n    /* global  TV2  TV3 */\n    // cover entire screen with new div...\n    const TV = $('body').hasClass('tv')\n    if (TV)\n      TV2.unplay('thumbzilla')\n\n    // get list of thumbs\n    let htm = ''\n    $(AJS.thumbzillas).each((key, val) => {\n      const start = parseInt(val, 10)\n      if (TV) {\n        const startend = `/start/${start}/end/${start + TV3.CLIP_SEC_MAX2}`\n        htm += `<a onclick=\"$('#opscreen1M').fadeOut('slow'); TV2.seekURL('${startend}')\" href=\"${startend}\">`\n      } else {\n        const locNEW = `/details/${id}&start=${start}`\n        htm += `<a onclick=\"$('#opscreen1M').fadeOut('slow'); return Play.seek(this)\" href=\"${locNEW}\">`\n      }\n      htm += `<img src=\"/download/${id}/${id}.thumbs/${id}_${val}.jpg\"/></a>`\n    })\n\n    if (htm === '') {\n      // eslint-disable-next-line  no-alert\n      alert('coming soon!')\n      return false\n    }\n\n    $('#opscreen1M').remove()\n    $('body').prepend($('<div />').attr({ id: 'opscreen1M' }))\n\n    const $imgs = $('<div/>').attr({ id: 'thumbzilla' }).html(`<div>${htm}</div>`)\n    $imgs.appendTo('#opscreen1M')\n    $('#opscreen1M').css('visibility', 'hidden').show()\n    const winH = $(window).height() + (AJS.ios ? 60 : 0) // plus iOS bleah\n    for (let w = 160; w >= 10; w -= 10) {\n      const h = Math.round(w * (110 / 160.0))\n      log('TRYING', w, 'x', h)\n      $('#thumbzilla img').css({ width: w, height: h })\n      if ($('#thumbzilla img:last').offset().top + h <= winH)\n        break\n    }\n\n    $('#thumbzilla div').center()\n    $('#opscreen1M').hide().css('visibility', 'visible').fadeIn('slow')\n      .one('click.opscreen1M.nixer', () => $('#opscreen1M').fadeOut('slow'))\n    return false\n  }\n\n  /* Wayback Machine form type-ahead setup: it presents a list of sites\n      matching the text as user types. */\n  static nav_tophat_wb_setup() {\n    // Configuration\n    const WAYBACK = 'https://web.archive.org'\n    const HOSTS_ENDPOINT =   `${WAYBACK}/__wb/search/host?q=`\n    const ANCHORS_ENDPOINT = `${WAYBACK}/__wb/search/anchor?q=`\n    const REDIRECT_URL =     `${WAYBACK}/web/*/`\n    const REDIRECT_SEARCH =  `${WAYBACK}/web/*/`\n\n    function search_or_calendar(query) {\n      if (query.indexOf('http://') === 0 ||\n          query.indexOf('https://') === 0 ||\n          query.match(/[\\w.]{2,256}\\.[a-z]{2,4}/gi))\n        document.location.href = REDIRECT_URL + query\n      else\n        document.location.href = REDIRECT_SEARCH + encodeURIComponent(query)\n    }\n\n    const $input = $('#nav-wb-url')\n    const $form = $input.parent('form')\n    $form.submit((e) => {\n      AJS.fireAnalyticsTrackingEvent('HomePageWayback', 'SearchForm')\n      const query = $input.val()\n      search_or_calendar(query)\n      e.preventDefault()\n      return false\n    })\n    $input.on('focus input paste', () => {\n      if (typeof $input.typeahead === 'undefined') {\n        $.ajax({\n          url: '/includes/node_modules/bootstrap-3-typeahead/bootstrap3-typeahead.min.js',\n          dataType: 'script',\n          cache: true,\n        }).done(() => {\n          $input.typeahead({\n            source: (query, process) => {\n              $input.focus() // bugfix https://github.com/bassjobsen/Bootstrap-3-Typeahead/issues/150#issuecomment-197949899\n              return $.get(HOSTS_ENDPOINT + encodeURIComponent(query), (data) => {\n                if (typeof data.hosts !== 'undefined' && data.hosts.length > 0) {\n                  return process(data.hosts)\n                } else if (typeof data.isUrl !== 'undefined' &&  data.isUrl === true &&\n                          typeof data.excluded === 'undefined') {\n                  return process([{\n                    display_name: query,\n                  }])\n                }\n\n                return $.get(ANCHORS_ENDPOINT + encodeURIComponent(query), (data2) => {\n                  if (typeof data2 !== 'undefined' && data2.length > 0)\n                    return process(data2.slice(0, 5))\n                  return undefined\n                })\n              })\n            },\n            matcher: () => true,\n            displayText: item => item.display_name,\n            autoSelect: false,\n            delay: 400,\n            fitToElement: false, /* not good with long URLs */\n            minLenght: 3,\n            items: 8,\n          }).change(() => {\n            const current = $input.typeahead('getActive')\n            if (current && current.display_name === $input.val())\n              $form.submit()\n          }).on('keyup', (e) => {\n            if (e.which === 10 || e.which === 13) {\n              AJS.fireAnalyticsTrackingEvent('HomePageWayback', 'SearchForm')\n              const query = $input.val()\n              search_or_calendar(query)\n              e.preventDefault()\n              return false\n            }\n            return undefined\n          })\n        })\n      }\n    })\n  }\n\n  /* eslint-disable */\n\n  /**\n   * Helper to open a popup with JS\n   * @param int width\n   * @param int height\n   * @param string href\n   */\n  static openPopup(width, height, href) {\n    const params = {\n      height: height,\n      width: width,\n      scrollbars: 'yes',\n      resizable: 'yes',\n      toolbar: 'no',\n      directories: 'no',\n      location: 'yes',\n      menubar: 'no',\n      status: 'yes',\n    }\n\n    // Options must be expressed as comma-separated key-value pairs.\n    const options = Object.keys(params)\n      .filter(key => params[key])\n      .reduce((paramPairs, key) => paramPairs.concat(`${key}=${params[key]}`), [])\n      .join(',')\n\n    window.open(href, 'popup', options)\n  }\n\n  /**\n   * React Component, a link that opens its href in a popup instead of the same window.\n   * Height and width of the popup can be customized via props.\n   */\n  static PopupLink({children, href, height, width, title} = {}) {\n    function handleClick(event) {\n      event.preventDefault();\n      return AJS.openPopup(width, height, href);\n    }\n\n    // Include href for semantics.\n    return <a href={href} title={title} onClick={handleClick}>{children}</a>;\n  }\n\n\n  /**\n   * Render the CreativeCommonsLicenseLink React component to a DOM node with the\n   * appropriate ID.\n   */\n  static setUpCreativeCommonsLicenseLink() {\n    const root = document.querySelector('#creative_commons_license_link_react');\n\n    if (!root) {\n      return;\n    }\n\n    ReactDOM.render(<AJS.CreativeCommonsLicenseLink\n      href={root.dataset.href}\n      licenseName={root.dataset.licenseName}\n      licenseSelected={root.dataset.licenseSelected === 'true'}\n    />, root);\n  }\n  /* eslint-enable */\n\n  /**\n   * Sets up listeners on search forms to handle opening/closing the search options.\n   *\n   * @see SearchOptions.inc\n   */\n  static setUpSearchForms() {\n    const body = $(document.body)\n    const searchForms = $('.js-search-form')\n\n    /**\n     * Sets up an individual form, isolating its event listeners from the other ones.\n     *\n     * @param {HTMLFormElement} formNode\n     */\n    function setUpSearchForm(formNode) {\n      const form = $(formNode)\n      const searchBar = form.find('.js-search-bar')\n      const searchOptions = form.find('.js-search-options')\n      const keepOpenWhenChanged = searchOptions.data('keepOpenWhenChanged')\n      let formChanged = false\n\n      /**\n       * Catches web searches and redirects them to Wayback Machine. The search form must have a\n       * \"data-wayback-machine-search-url\" attribute set in order for this method to work (and the\n       * method assumes the query can be tacked onto the end of this URL). For all other kinds of\n       * searches, does nothing.\n       *\n       * @param {Event} event\n       */\n      function redirectWaybackSearches(event) {\n        const { waybackMachineSearchUrl } = this.dataset\n        const elements = $(this.elements)\n        const checkedInput = elements.filter('[name=\"sin\"]:checked')\n        const searchInput = elements.filter('[name=\"search\"]')\n        const sinValue = checkedInput.length ? checkedInput[0].value : ''\n        const searchValue = searchInput.length ? searchInput[0].value : ''\n\n        if (waybackMachineSearchUrl && sinValue === 'WEB') {\n          event.preventDefault()\n\n          window.location = [\n            // Remove trailing slash just in case.\n            waybackMachineSearchUrl.replace(/\\/$/, ''),\n            searchValue,\n          ].join('/')\n        }\n      }\n\n      function openOptions() {\n        searchOptions\n          .addClass('is-open')\n          .attr('aria-expanded', true)\n      }\n\n      function closeOptions() {\n        searchOptions\n          .removeClass('is-open')\n          .attr('aria-expanded', false)\n      }\n\n      /**\n       * Closes options if the newly focused element is outside of the form and the form\n       * is configured to close when it is no longer active.\n       *\n       * @param {HTMLElement} targetElement element being clicked or receiving focus\n       */\n      function handleFocusChange(targetElement) {\n        if (\n          !targetElement ||\n          form[0].contains(targetElement) ||\n          (keepOpenWhenChanged && formChanged)\n        )\n          return\n\n        closeOptions()\n      }\n\n      if (form.length) {\n        form.on('submit', redirectWaybackSearches)\n\n        if (!searchOptions.hasClass('is-open')) {\n          body.on('click', (event) => {\n            handleFocusChange(event.target)\n          })\n\n          form\n            .on('change', () => {\n              formChanged = true\n            })\n            .on('focusout', (event) => {\n              handleFocusChange(event.relatedTarget)\n            })\n\n          searchBar.on('focusin', () => {\n            openOptions()\n          })\n        }\n      }\n    }\n\n    searchForms.each((index, node) => setUpSearchForm(node))\n  }\n\n  /**\n   * Sets up two-way communication between the main page and a BookReader\n   * embedded in an <iframe>\n   *\n   * Due to the <iframe> the page and the BookReader must communicate using\n   * the BookReader's URL plugin, which sends and listens for \"message\"\n   * events via window.postMessage().\n   */\n  static setUpBookReaderIframe() {\n    const messageType = 'bookReaderFragmentChange'\n    const iframe = document.querySelector('#texty iframe')\n\n    // No BookReader embed, abort\n    if (!iframe) return\n\n    // URL syncing not enabled, abort\n    if (!iframe.hasAttribute('data-book-reader-sync-urls')) return\n\n    /**\n     * Updates the current page URL without reloading or adding to the\n     * browser history using the History API\n     *\n     * On browsers that don't support window.history (mainly Opera Mini),\n     * this is a no-op.\n     *\n     * @param {String} fragment the new fragment\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/History_API\n     */\n    function updateUrl(fragment) {\n      // History API not supported, abort\n      if (!('history' in window)) return\n\n      const path = replaceBookReaderFragment(\n        window.location.pathname,\n        fragment,\n      )\n\n      // Reconstruct URL with new path\n      const url = path + window.location.search + window.location.hash\n\n      window.history.replaceState({ fragment }, window.title, url)\n    }\n\n    window.addEventListener('message', (event) => {\n      // Not a recognized message type, abort\n      if (!event.data || event.data.type !== messageType) return\n\n      updateUrl(event.data.fragment)\n    })\n  }\n\n  /**\n   * Expandable/collapsible accordion component, implemented with <details>\n   * elements\n   *\n   * The JavaScript guarantees only one <details> is open at a time and\n   * scrolls the open <details>'s content into view.\n   *\n   * @see accordion.less\n   */\n  static setUpAccordions() {\n    /**\n     * Closes all <details> elements in detailsEls, except selectedDetails\n     *\n     * @param {HTMLDetailsElement[]} detailsEls\n     * @param {HTMLDetailsElement}   selectedDetails\n     */\n    function closeAllExcept(detailsEls, selectedDetails) {\n      Array.from(detailsEls)\n        .forEach((details) => {\n          if (details !== selectedDetails) {\n            // eslint-disable-next-line no-param-reassign\n            details.open = false\n          }\n        })\n    }\n\n    /**\n     * Sets up a single accordion component\n     *\n     * @param {HTMLElement} accordion\n     */\n    function setUpAccordion(accordion) {\n      /**\n       * Responds to the \"toggle\" event on a <details>\n       *\n       * @param {Event} event\n       */\n      function handleToggle(event) {\n        if (!event.target.open) return\n\n        closeAllExcept(\n          accordion.querySelectorAll('details'),\n          event.target,\n        )\n\n        // See https://www.abeautifulsite.net/smoothly-scroll-to-an-element-without-a-jquery-plugin-2\n        $('html, body').animate({\n          scrollTop: $(event.target).offset().top,\n        }, 400)\n      }\n\n      Array.from(accordion.querySelectorAll('details'))\n        .forEach((details) => {\n          details.addEventListener('toggle', handleToggle)\n        })\n\n      accordion.setAttribute('data-accordion-ready', '')\n    }\n\n    Array.from(document.querySelectorAll('[data-accordion]'))\n      .forEach(setUpAccordion)\n  }\n\n  /**\n   * Handles click on search 'Advanced Search' link.\n   *\n   * If 'Search TV news captions' is checked, we ignore the link click\n   * and create and open TV advanced search popup right on the page.\n   *\n   * @return {boolean}  true for browser to go to normal advanced search page; else false\n   */\n  static advanced_search(link) {\n    if (!AJS.is_advanced_TV_search(link))\n      return true\n\n    // this means we want TV advanced search form behaviour instead!\n    if (!AJS.adv) {\n      AJS.adv = {\n        mapping: false,\n      }\n    }\n\n    // only reload the resources below at most 1x/day\n    const ymd = new Date().toISOString().substr(0, 10) // eg: 2017-06-28\n    $.ajaxSetup({\n      cache: true,\n    })\n\n    // NOTE: using new JS Promise / jQuery Promise-ish Deferred..\n    // NOTE: if we are invoking this more than once, we reuse prior results\n    // NOTE: ymd forces reload at least once a day\n    // NOTE: if any resources happen to _already_ be loaded in <head>, use them\n    const i = 'https://archive.org/includes/'\n    $.when(\n      (typeof TV       !== 'undefined' || $.getScript(i.concat('tv.min.js?', ymd))),\n      (typeof TVSearch !== 'undefined' || $.getScript(i.concat('build/js/tvsearch.min.js?', ymd))),\n      ($.ui || $.getScript(i.concat('jquery-ui-1.10.3.min.js'))),\n      ($.ui || $.get('/includes/redmond/jquery-ui-1.10.3.min.css', (css) => {\n        $('<style />').html(css).appendTo('head') // Add CSS to page\n      })),\n      (AJS.adv.mapping || $.getJSON('/details/tv?mappings&output=json&'.concat(ymd), (mapping) => {\n        AJS.adv.mapping = mapping\n      })),\n    ).then(() => {\n      if (AJS.adv.mapping.length !== 2) {\n        // eslint-disable-next-line  no-alert\n        alert('failed to get network and program mappings!')\n        return\n      }\n\n      /* global  TVSearch */\n      TVSearch.proPick(AJS.adv.mapping, link)\n    })\n\n\n    return false\n  }\n\n\n  /**\n   * Returns whether or not 'Advanced Search' should be handled via JS\n   * (which as of now is just TV FTS to make a popup show up).\n   * Logically private.\n   *\n   * @param  {DOM element}  elm 'Advanced Search' link element that was just clicked\n   * @return {Boolean}      should handle with JS and not directly go to /advanced_search.php?\n   */\n  static is_advanced_TV_search(elm) {\n    if (location.hostname === 'web.archive.org')\n      return false\n\n    // for now at least, tracey felt should avoid handling link on IA top/home page even when\n    // TV FTS is picked.  for consistency, this is _definitely_ worth revisiting.\n    if ($(document.body).hasClass('top'))\n      return false\n\n    const $form = $(elm).parents('form')\n    if ($form.find('.js-search-options input[value=TV]').is(':checked'))\n      return $form\n\n    return false\n  }\n\n\n  /**\n   * Fires an Archive Analytics tracking event.\n   * @param {string} category\n   * @param {string} action\n   * @param {string} label\n   */\n  static fireAnalyticsTrackingEvent(category, action, label = location.pathname) {\n    if (typeof archive_analytics !== 'undefined') {\n      archive_analytics.send_ping({\n        kind: 'event',\n        ec: category,\n        ea: action,\n        el: label,\n        cache_bust: Math.random(),\n      })\n    }\n  }\n\n  /**\n   * Attaches handlers for action tracking.\n   *\n   * To enable click tracking for a link, add a `data-event-click-tracking`\n   * attribute containing the Google Analytics Event Category and Action, separated\n   * by a vertical pipe (|).\n   * e.g. `<a href=\"foobar\" data-event-click-tracking=\"TopNav|FooBar\">`\n   *\n   * To enable form submit tracking, add a `data-event-form-tracking` attribute\n   * to the `form` tag.\n   * e.g. `<form data-event-form-tracking=\"TopNav|SearchForm\" method=\"GET\">`\n   */\n  static setUpActionTracking() {\n    const clickTrackingAttributeName = 'event-click-tracking'\n    const formTrackingAttributeName = 'event-form-tracking'\n\n    function actionHandler(attributeName) {\n      return (event) => {\n        const currentTarget = $(event.currentTarget)\n        if (!currentTarget)\n          return\n        const categoryAction = currentTarget.data(attributeName)\n        if (!categoryAction)\n          return\n        const categoryActionParts = categoryAction.split('|')\n        AJS.fireAnalyticsTrackingEvent(categoryActionParts[0], categoryActionParts[1])\n      }\n    }\n\n    $(document.body).on('click', `[data-${clickTrackingAttributeName}]`, actionHandler(clickTrackingAttributeName))\n    $(`form[data-${formTrackingAttributeName}]`).on('submit', actionHandler(formTrackingAttributeName))\n  }\n\n  /**\n   * Sets up data-popup-links\n   */\n  static setupPopupLink() {\n    const attributeName = 'popup-link'\n    const widthAttribute = 'popup-link-width'\n    const heightAttribute = 'popup-link-height'\n\n    $(document.body).on('click', `[data-${attributeName}]`, (event) => {\n      event.preventDefault()\n      const currentTarget = $(event.currentTarget)\n      const w = currentTarget.data(widthAttribute) || 500\n      const h = currentTarget.data(heightAttribute) || 500\n      AJS.openPopup(w, h, event.currentTarget.href)\n    })\n  }\n\n  /**\n   * React functional component. Renders related item tiles on details page.\n   * This markup is *duplicated between the JS and PHP to render tiles.\n   *\n   * @see Tiles::construct()\n   *\n   * @param {Object} params\n   * @param {Array}  params.dataHash\n   * @return {JSX.ElementClass}\n   */\n  static RelatedItemSection({ dataHash = [] }) {\n    return (\n      <section aria-label=\"Related Items\">\n        {dataHash.map(item => (\n          <div className=\"results\">\n            <div className=\"item-ia\" data-id={item.identifier} data-mediatype={item.mediatype} data-year=\"\">\n              <a className=\"stealth\" tabIndex=\"-1\" href={`/details/${item.identifier}`}>\n                <div className=\"hidden-tiles views C C1\">\n                  <span className=\"hidden-xs\">{item.downloads}</span>\n                  <span className=\"hidden-sm hidden-md hidden-lg\">{item.downloads}</span>\n                </div>\n              </a>\n\n              <div className=\"C234\">\n                <div className={`item-ttl ${item.lendClass} C C2`}>\n                  <a href={`/details/${item.identifier}`} title={item.title} data-event-click-tracking=\"GenericNonCollection|ItemTile\">\n                    <div className=\"tile-img\">\n                      <img className=\"item-img\" alt=\"\" src={`/services/img/${item.identifier}`} />\n                    </div>\n\n                    {(item.lendingEnabled === true && item.lendingAvailable === true) &&\n                      <div className=\"tile-action hidden-lists\">Borrow</div>\n                    }\n\n                    {(item.lendingEnabled === true && item.lendingAvailable === false) &&\n                      <div className=\"tile-action hidden-lists\">Join Waitlist</div>\n                    }\n\n                    {(item.loginRequired === true) &&\n                      <div className=\"tile-action hidden-lists\">Log in to view this item</div>\n                    }\n\n                    <div className=\"ttl\">{item.title}</div>\n                  </a>\n                </div>\n\n                <div className=\"by C C4\">\n                  {(item.creator !== '') &&\n                    <div>\n                      <span className=\"hidden-lists\">by </span>\n                      <span className=\"byv\" title={item.creator}>{item.creator}</span>\n                    </div>\n                  }\n                </div>\n              </div>\n\n              <div className=\"statbar \">\n                <div className=\"mt-icon C C5\">\n                  <span className={`iconochive-${item.mediatype}`} aria-hidden=\"true\">&nbsp;</span>\n                  <span className=\"sr-only\">{item.mediatype}</span>\n                </div>\n\n                <h6 className=\"stat\">\n                  <span className=\"iconochive-eye\" aria-hidden=\"true\">&nbsp;</span>\n                  <span className=\"sr-only\">eye</span><span>{item.downloads}</span>\n                </h6>\n\n                <h6 className=\"stat\">\n                  <span className=\"iconochive-favorite\" aria-hidden=\"true\">&nbsp;</span>\n                  <span className=\"sr-only\">favorite</span>{item.favorite}\n                </h6>\n\n                <h6 className=\"stat\">\n                  <span className=\"iconochive-comment\" aria-hidden=\"true\">&nbsp;</span>\n                  <span className=\"sr-only\">comment</span>{item.numReviews}\n                </h6>\n              </div>\n            </div>\n          </div>\n        ))}\n      </section>\n    )\n  }\n\n  /**\n   * React functional component. Renders a table showing view stats per geographic region for an\n   * item or collection.\n   *\n   * @see stats-table.less\n   *\n   * @param {Object} props\n   * @param {String} props.caption\n   * @param {GeoCount[]} props.counts\n   * @return {String}\n   */\n  static RegionsTable({ caption = 'Regions', captionClass = '', counts = [] }) {\n    return (\n      <table className=\"stats-table\">\n        <caption className={captionClass}>{caption}</caption>\n\n        <thead>\n          <tr>\n            <th scope=\"col\">Region</th>\n            <th scope=\"col\">Country</th>\n            <th className=\"stats-table__numeric-column\" scope=\"col\">Views</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {counts.map(count => (\n            <tr key={`${count.state.code}_${count.country.code}_${count.count}`}>\n              <td>{count.state.formattedName}</td>\n              <td>{count.country.formattedName}</td>\n              <td className=\"stats-table__numeric-column\">{count.formattedCount}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>)\n  }\n\n  /**\n   * React functional component. Renders a message to display while a resource is loading.\n   *\n   * @see loading-message.less\n   *\n   * @param {Object} props\n   * @param {String} props.message\n   * @return {String}\n   */\n  static LoadingMessage({ message = 'Loading' }) {\n    return <small className=\"loading-message\">{message}</small>\n  }\n\n  /**\n   * React functional component. Renders a error message.\n   *\n   * @param {Object} props\n   * @param {String} props.errorMsg\n   * @return {JSX.ElementClass}\n   */\n  static ErrorMessage({ errorMsg }) {\n    return <small>{errorMsg}</small>\n  }\n\n  /**\n   * Finds an element with class \"js-top-regions-table\" and renders a table showing the top 10\n   * regions in terms of views for an item/collection.\n   *\n   * Data Attributes:\n   *  - data-caption (string)\n   *  - data-caption-class (string)\n   *  - data-days (number)\n   *  - data-identifier (string)\n   *  - data-limit (number)\n   */\n  static setUpTopRegionsTable() {\n    const root = $('.js-top-regions-table')\n    const message = root.find('.js-top-regions-message')\n    const originalMessageText = message.text()\n\n    if (!root || !message)\n      return\n\n    ReactDOM.render(<AJS.LoadingMessage message=\"loading data\" />, message[0])\n\n    const apiOptions = {\n      uaKinds: ['non_robot', 'unrecognized'],\n    }\n\n    if (root.data('days'))\n      apiOptions.days = parseInt(root.data('days'), 10)\n\n    if (root.data('limit'))\n      apiOptions.limit = parseInt(root.data('limit'), 10)\n\n    AJS.StatsApiClient.getGeoCounts(root.data('identifier'), apiOptions).then(\n      (counts) => {\n        ReactDOM.render(<AJS.RegionsTable\n          caption={root.data('caption')}\n          captionClass={root.data('captionClass')}\n          counts={counts}\n        />, root[0])\n      },\n      () => {\n        // If API call fails, fall back to original text.\n        message.text(originalMessageText)\n      },\n    )\n  }\n} // end class AJS\n\n\nclass Timegraf {\n  // class for facets section interactive time-related graph.\n  // Graph shows search results histogramed over time.\n  // It allows user to drag left and right 'handles' overlaying the graph to constrain to a\n  // smaller time period.\n  static timechanged = false\n  static c = {} // config that comes from PHP\n\n  static setup(leftTS, riteTS, minDate, maxDate) {\n    Timegraf.c.realGraphWidth = Timegraf.c.GRAPH_WIDTH - Timegraf.c.GRAPH_PADDING\n    Timegraf.c.maxSlide = Math.floor((maxDate.getTime() - minDate.getTime()) / 86400000)\n    const csMinTS = minDate.getTime() / 1000\n    const left = leftTS > 0 ? Math.floor((leftTS - csMinTS) / 86400) : 0\n    const rite = riteTS > 0 ? Math.floor((riteTS - csMinTS) / 86400) : Timegraf.c.maxSlide\n\n\n    const $sliderdiv = $('<div />').attr({ id: 'slider' }).css({\n      width: Timegraf.c.realGraphWidth,\n      position: 'absolute',\n      top: (Timegraf.c.GRAPH_HEIGHT - 10),\n      left: 0,\n      zIndex: 1,\n    })\n    $('#timegraf').append($sliderdiv)\n    $sliderdiv.append('<br />') // bleah!\n\n\n    log(left, rite)\n\n    $('#slider').slider({\n      range: true,\n      max: Timegraf.c.maxSlide,\n      values: [left, rite],\n      slide: (event, ui) => {\n        const ts = minDate.getTime()\n        const d1 = new Date(ts)\n        const d2 = new Date(ts)\n\n        d1.setDate(d1.getDate() + ui.values[0])\n        d2.setDate(d2.getDate() + ui.values[1])\n\n        $('#from ').html($.datepicker.formatDate('M d', d1)) // Jan 19\n        $('#to   ').html($.datepicker.formatDate('M d', d2)) // Jan 19\n        $('#fromB').html($.datepicker.formatDate('yymmdd', d1)) // yyyymmdd\n        $('#toB  ').html($.datepicker.formatDate('yymmdd', d2)) // yyyymmdd\n        $('#datepickL').val($.datepicker.formatDate('mm/dd/yy', d1)) // mm/dd/yyyy\n        $('#datepickR').val($.datepicker.formatDate('mm/dd/yy', d2)) // mm/dd/yyyy\n\n\n        clearTimeout(Timegraf.hideL)\n        clearTimeout(Timegraf.hideR)\n\n        const foff = { left: ($('#slider .ptrL').offset().left - $('#from').width()) + 10 }\n        const toff = { left:  $('#slider .ptrR').offset().left }\n        /* eslint-disable  brace-style */\n        $('#from').offset(foff).show(0, () => { Timegraf.hideL = setTimeout(() => $('#from').hide('slow'), 2000) })\n        $('#to  ').offset(toff).show(0, () => { Timegraf.hideR = setTimeout(() => $('#to  ').hide('slow'), 2000) })\n        /* eslint-enable  brace-style */\n\n        Timegraf.pinkme(ui.values[0], ui.values[1])\n      },\n      stop: (event, ui) => {\n        Timegraf.adjust(ui.values[0], ui.values[1])\n        Timegraf.timechanged = true\n        const now = location.href.replace(/^http[s]*:/, '')\n        const become = `//${location.host}${Timegraf.c.q}${Timegraf.args()}`\n\n        if (now !== become) {\n          log(now)\n          log(become)\n\n          // make it more obvious that search is being issued\n          $('#opscreen1M').remove()\n          $('body').append($('<div id=\"opscreen1M\"/>'))\n          $('#opscreen1M').show('slow', () => {\n            location.href = become\n          })\n        }\n      },\n    })\n\n    if (left > 0  ||  rite > 0)\n      Timegraf.pinkme(left, rite)\n  }\n\n  static pinkme(left, rite) {\n    const x = Math.round(Timegraf.c.GRAPH_PADDING / 2)\n    const pinkL = (Math.round((left / Timegraf.c.maxSlide) * Timegraf.c.realGraphWidth) + 2)\n    const pinkR = (Math.round((rite / Timegraf.c.maxSlide) * Timegraf.c.realGraphWidth) - 2) + x\n\n    const rect = `rect(0px,${pinkR}px,${Timegraf.c.GRAPH_HEIGHT}px,${pinkL}px)`\n    log(rect)\n    $('#timegraf-clip').css('clip', rect)\n\n    const ttl = 'click and drag this to change time period'\n    const attr = { 'data-title': ttl, 'data-toggle': 'tooltip', 'data-placement': 'bottom' }\n    $($('#slider a').get(0)).attr(attr).removeClass('ui-state-default').addClass('ptrL')\n    $($('#slider a').get(1)).attr(attr).removeClass('ui-state-default').addClass('ptrR')\n\n    Timegraf.adjust(left, rite)\n  }\n\n  static adjust(left, rite) {\n    const onedayspan = (rite - left < 2)\n\n    log('left:', left, 'rite:', rite)\n\n    if (onedayspan) {\n      $('#to').hide()\n      $('#slider .ui-widget-header').css('borderColor', '#d33682')\n      $('#slider .ui-widget-header').css('border-left-width', 0)\n    } else {\n      $('#slider .ui-widget-header').css('borderColor', '#d33682')\n      $('#slider .ui-widget-header').css('border-left-width', 2)\n    }\n  }\n\n  static args() {\n    if (!Timegraf.timechanged)\n      return ''\n    const from2 = $('#fromB').text().trim()\n    const   to2 = $('#toB  ').text().trim()\n    const end = (from2 === to2 ? '' : `-${to2}`)\n    return `&time=${from2}${end}` // TVII\n  }\n} // end class Timegraf\n\n\n(function defineStatsApi() {\n  /**\n   * @param {String} source\n   * @return {String}\n   */\n  function capitalizeFirstLetter(source) {\n    return source.charAt(0).toUpperCase() + source.slice(1)\n  }\n\n  /**\n   * A geographic region (either a country or a state/province within a country) for the\n   * purposes of site usage statistics.\n   */\n  class StatsRegion {\n    /**\n     * @param {Object} props\n     * @param {String} props.code\n     * @param {String} props.name\n     */\n    constructor({ code, name }) {\n      this.code = code\n      this.name = name\n    }\n\n    /**\n     * @return {String}\n     */\n    get formattedName() {\n      return capitalizeFirstLetter(this.name)\n    }\n  }\n\n  /**\n   * A count of site usage from a particular state/province.\n   */\n  class GeoCount {\n    /**\n     * @param {Object} props\n     * @param {String} props.count\n     * @param {String} props.country\n     * @param {String} props.state\n     */\n    constructor({ count, country, state }) {\n      this.count = parseInt(count, 10)\n      this.country = country\n      this.state = state\n    }\n\n    /**\n     * @return {String}\n     */\n    get formattedCount() {\n      return AJS.addCommas(this.count)\n    }\n  }\n\n  /**\n   * @param {Object} data\n   * @return {GeoCount}\n   */\n  function createGeoCountFromApiData(data) {\n    return new GeoCount({\n      count: data.sum_count_value,\n\n      country: new StatsRegion({\n        code: data.geo_country,\n        name: data.country,\n      }),\n\n      state: new StatsRegion({\n        code: data.geo_state,\n        name: data.state,\n      }),\n    })\n  }\n\n  /**\n   * Parse API data and produce a list of GeoCount objects, with counts made by combining sums\n   * from various kinds of user agents.\n   *\n   * @param {Object}   data must have key counts_geo\n   * @param {Object}   options\n   * @param {String[]} options.uaKinds list of user-agent kinds to include\n   * @return {GeoCount[]}\n   */\n  function createCombinedGeoCountsFromApiData(data, {\n    uaKinds = ['robot', 'non_robot', 'unrecognized'],\n  } = {}) {\n    if (!data.counts_geo)\n      throw new RangeError(\"API response doesn't contain property 'counts_geo'.\")\n\n    /**\n     * @param {String} uaKind\n     * @return {Boolean}\n     */\n    function uaKindIsAllowed(uaKind) {\n      return uaKinds.indexOf(uaKind) !== -1\n    }\n\n    const countsMap = {}\n\n    for (let i = 0; i < data.counts_geo.length; i++) {\n      const countData = data.counts_geo[i]\n\n      // Whitelist user agents and skip unknown countries.\n      if (uaKindIsAllowed(countData.ua_kind) && countData.country !== 'unknown') {\n        const mapKey = `${countData.geo_country}_${countData.geo_state}`\n\n        // Add to an existing count or create a new one.\n        if (countsMap[mapKey])\n          countsMap[mapKey].count += countData.sum_count_value\n        else\n          countsMap[mapKey] = createGeoCountFromApiData(countData)\n      }\n    }\n\n    return Object.keys(countsMap).map(key => countsMap[key])\n  }\n\n  const apiBaseUrl = 'https://be-api.us.archive.org/views/v1'\n\n  /**\n   * Interface for fetching site usage stats from the stats API.\n   */\n  AJS.StatsApiClient = class StatsApiClient {\n    /**\n     * @param {String} identifier\n     * @param {Object} options\n     * @param {Number} options.days\n     * @param {Number} options.limit\n     * @return {jQuery.Promise<GeoData[]>}\n     */\n    static getGeoCounts(identifier, {\n      days = 30,\n      limit = 100,\n      uaKinds = ['robot', 'non_robot', 'unrecognized'],\n    } = {}) {\n      const url = `${apiBaseUrl}/detail/collection/${identifier}/${days}`\n\n      return $.get(url)\n        .then((data) => {\n          try {\n            return createCombinedGeoCountsFromApiData(data, { uaKinds })\n              .sort((count1, count2) => (count1.count < count2.count ? 1 : -1))\n              .slice(0, limit)\n          } catch (error) {\n            return $.Deferred().reject(error)\n          }\n        })\n    }\n  }\n}())\n\n/* eslint-disable */\n\n/**\n * React component, Creative Commons license selector link.\n * Shows a \"remove\" link when a license is selected.\n */\nAJS.CreativeCommonsLicenseLink = React.createClass({\n  DEFAULT_LINK_TEXT: 'Choose license',\n\n  defaultProps: {\n    licenseName: undefined,\n    licenseSelected: false,\n  },\n\n  getInitialState() {\n    return {\n      licenseSelected: this.props.licenseSelected,\n      linkText: this.props.licenseName || this.DEFAULT_LINK_TEXT,\n      oldLicenseName: this.props.licenseName,\n    };\n  },\n\n  componentWillReceiveProps(newProps) {\n    this.setState({\n      licenseSelected: newProps.licenseSelected,\n      linkText: newProps.licenseName || this.DEFAULT_LINK_TEXT,\n    });\n  },\n\n  removeLicense() {\n    this.setState({\n      licenseSelected: false,\n      linkText: this.DEFAULT_LINK_TEXT,\n    });\n\n    this.removeRetainLicenseInput();\n  },\n\n  /**\n   * This is left over from the old, non-React version of this widget, so\n   * we need to reach outside of the React component and change another DOM node.\n   */\n  removeRetainLicenseInput() {\n    const formItem = document.getElementById('retaincclicense');\n    formItem.parentNode.removeChild(formItem);\n  },\n\n  wasLicensedChanged() {\n    return this.state.oldLicenseName !== this.state.linkText;\n  },\n\n  getLicenseChangeMessage() {\n    if (this.state.oldLicenseName && this.wasLicensedChanged()) {\n      return `Change license (currently ${this.state.oldLicenseName})`;\n    }\n\n    return '';\n  },\n\n  render() {\n    return <span>\n      <AJS.PopupLink\n        href={this.props.href}\n        height=\"600\"\n        width=\"600\"\n        title={this.getLicenseChangeMessage()}\n      >{this.state.linkText}</AJS.PopupLink>\n\n      {' '}\n\n      {this.state.licenseSelected &&\n        <span>\n          (<button\n            type=\"button\"\n            className=\"creativecommons-remove-license-button\"\n            onClick={this.removeLicense}\n          >remove</button>)\n        </span>\n      }\n    </span>;\n  },\n})\n/* eslint-enable */\n\nAJS.MORFreact = React.createClass({\n  FACETS_PER_PAGE: 100,\n\n  getInitialState() {\n    return {\n      page: 1,\n      href: '',\n      mounted: false,\n      hdr: '',\n      options: [],\n    }\n  },\n\n  getFacets() {\n    const self = this\n    // xxxx Math.rand anti-browser caching etc??\n    $.getJSON(`${this.props.href}&headless=1&output=json`, (ret) => {\n      // eslint-disable-next-line  no-param-reassign\n      ret.href = self.props.href\n      // eslint-disable-next-line  no-param-reassign\n      ret.mounted = true\n      log(ret)\n\n      self.setState(ret)\n\n      // now check all the boxes that user has previously/currently checked\n      for (let j = 0; j < ret.checked.length; j++) {\n        for (let i = 0; i < self.state.options.length; i++) {\n          const { val } = self.state.options[i]\n          // NOTE: == not === so \"1970\"==1970 (eg: year facet)\n          // eslint-disable-next-line  eqeqeq\n          if (ret.checked[j] == val) {\n            self.refs[val].checked = true\n            break\n          }\n        }\n      }\n    })\n  },\n\n  componentDidMount() {\n    // Our component is visible in page now, effectively empty\n    // Now ask server for facets to render in\n    log('mounted')\n    this.getFacets()\n  },\n\n  pageClick(e) {\n    e.stopPropagation()\n    e.preventDefault()\n\n    // if user clicked on the |> \"next page\" icon, advance one page;\n    // else they clicked on a specific page number to go to\n    const page = ($(e.target).text() === '' ? this.state.page + 1 : parseInt($(e.target).text(), 10))\n    this.setState({ page })\n  },\n\n  submitClick() {\n    log('submitted')\n    let url = this.state.submit\n    for (let i = 0; i < this.state.options.length; i++) {\n      const { val } = this.state.options[i]\n      if (this.refs[val].checked) {\n        const tmp = `&and[]=${this.state.morf}%3A\"${encodeURIComponent(val)}\"`\n        log('checked', val, '=>', tmp)\n        url += tmp\n      }\n    }\n    log(url)\n    location.href = url\n  },\n\n  render() {\n    log('rendering..')\n    // log(this.props.href)\n    // log(this.state.href)\n\n    let loading = !this.state.mounted\n    if (this.state.href !== ''  &&  this.props.href !== this.state.href) {\n      loading = true\n      this.getFacets()\n    }\n\n    $('#morf-modal .modal-title').html(loading ? '' : this.state.hdr)\n\n    const min = (this.state.page - 1) * this.FACETS_PER_PAGE\n    const max = (min + this.FACETS_PER_PAGE) - 1\n    const options = this.state.options.map((option, n) => (\n      <div className={(n >= min && n <= max && !loading ? 'farow' : 'farow hidden')} key={option.val}>\n        <div className=\"facell\">\n          <input\n            onClick={this.handleClick}\n            type=\"checkbox\"\n            name={option.val}\n            value={option.val}\n            ref={option.val}\n          />\n        </div>\n        <div className=\"facell\">\n          {AJS.addCommas(option.n)}\n        </div>\n        <div className=\"facell\">\n          {option.txt ? option.txt : option.val}\n        </div>\n      </div>))\n\n    const paging = []\n    const npages = (Math.ceil(this.state.options.length / this.FACETS_PER_PAGE))\n    let loadnote = ''\n    if (loading) {\n      loadnote = (\n        <div style={{ 'font-style': 'italic', margin: '25px', 'text-align': 'center' }}>\n          loading filters...\n          <img alt=\"\" style={{ width: '25px' }} key={loading} src=\"/images/loading.gif\" />\n        </div>)\n    } else {\n      let page = 1\n      for (page = 1; page <= npages; page++) {\n        if (this.state.page === page)\n          paging.push(<div key={'p'.concat(page)} className=\"topinblock\">{page}</div>)\n        else\n          paging.push(<a href={'#'.concat(page)} key={'p'.concat(page)} onClick={this.pageClick}>{page}</a>)\n        paging.push(' ')\n      }\n      if (this.state.page < npages) {\n        const tmp = (\n          <a href={'#'.concat(page)} key={'pp'.concat(page)} onClick={this.pageClick}>\n            <span className=\"iconochive-right-solid\" />\n          </a>)\n        paging.push(tmp)\n      }\n    }\n    return (\n      <div id=\"morf-page\">\n        <form>\n          <div className=\"fatable facet-subject\">\n            {options}\n          </div>\n          {loadnote}\n          <div id=\"morf-paging\">\n            {paging}\n          </div>\n          <center>\n            <input className={loading ? 'btn-primary hidden' : 'btn-primary'} type=\"button\" value=\"Apply your filters\" onClick={this.submitClick} />\n          </center>\n        </form>\n      </div>\n    )\n  },\n})// end MORFreact\n\n\n/** ******************************************************************************************\n *\n *\n *    THIRD PARTY INCLUDES WE CANT LIVE WITHOUT! 8-)\n *\n *\n ******************************************************************************************** */\n\n/* eslint-disable */\n/**\n * Cookie plugin\n *\n * Copyright (c) 2006 Klaus Hartl (stilbuero.de)\n * Dual licensed under the MIT and GPL licenses:\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.gnu.org/licenses/gpl.html\n *\n */\n\n/**\n * Create a cookie with the given name and value and other optional parameters.\n *\n * @example $.cookie('the_cookie', 'the_value');\n * @desc Set the value of a cookie.\n * @example $.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });\n * @desc Create a cookie with all available options.\n * @example $.cookie('the_cookie', 'the_value');\n * @desc Create a session cookie.\n * @example $.cookie('the_cookie', null);\n * @desc Delete a cookie by passing null as value. Keep in mind that you have to use the same path and domain\n *       used when the cookie was set.\n *\n * @param String name The name of the cookie.\n * @param String value The value of the cookie.\n * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.\n * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.\n *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.\n *                             If set to null or omitted, the cookie will be a session cookie and will not be retained\n *                             when the the browser exits.\n * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).\n * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).\n * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will\n *                        require a secure protocol (like HTTPS).\n * @type undefined\n *\n * @name $.cookie\n * @cat Plugins/Cookie\n * @author Klaus Hartl/klaus.hartl@stilbuero.de\n */\n\n/**\n * Get the value of a cookie with the given name.\n *\n * @example $.cookie('the_cookie');\n * @desc Get the value of a cookie.\n *\n * @param String name The name of the cookie.\n * @return The value of the cookie.\n * @type String\n *\n * @name $.cookie\n * @cat Plugins/Cookie\n * @author Klaus Hartl/klaus.hartl@stilbuero.de\n */\n$.cookie = function(name, value, options) {\n  if (typeof value != 'undefined') { // name and value given, set cookie\n      options = options || {};\n      if (value === null) {\n          value = '';\n          options.expires = -1;\n      }\n      var expires = '';\n      if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {\n          var date;\n          if (typeof options.expires == 'number') {\n              date = new Date();\n              date.setTime(date.getTime() + (options.expires * 24 * 60 * 60 * 1000));\n          } else {\n              date = options.expires;\n          }\n          expires = '; expires=' + date.toUTCString(); // use expires attribute, max-age is not supported by IE\n      }\n\n      // CAUTION: Needed to parenthesize options.path and options.domain\n      // in the following expressions, otherwise they evaluate to undefined\n      // in the packed version for some reason...\n      var path = options.path ? '; path=' + (options.path) : '';\n      var domain = options.domain ? '; domain=' + (options.domain) : '';\n      var secure = options.secure ? '; secure' : '';\n\n      if (navigator.userAgent.indexOf('MSIE 9.')>0) { // IE9 sucks and can kiss it (tracey may2012)\n        domain='';\n        path='';\n      }\n\n      document.cookie = [name, '=', encodeURIComponent(value), expires, path, domain, secure].join('');\n      return true;\n  } else { // only name given, get cookie\n      var cookieValue = null;\n      if (document.cookie && document.cookie != '') {\n          var cookies = document.cookie.split(';');\n          for (var i = 0; i < cookies.length; i++) {\n              var cookie = $.trim(cookies[i]);\n              // Does this cookie string begin with the name we want?\n              if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                  break;\n              }\n          }\n      }\n      return cookieValue;\n  }\n}\n/* eslint-enable */\n\n\n// (adapted) from http://www.queness.com/code-snippet/6853/center-an-element-on-the-screen-using-jquery\n// then you can use it like:\n//      $(\"#gridmini\").center()\n\n// eslint-disable-next-line  no-param-reassign\n$.fn.center = function jquery_extension_center() {\n  const myheight = (this.height() +\n                    parseInt(this.css('padding-top'), 10) +\n                    parseInt(this.css('padding-bottom'), 10))\n\n  log('myheight', myheight)\n  log('mywidth', this.width())\n  log(\n    'w.height', $(window).height(),\n    'w.width', $(window).width(),\n    'w.scrollTop', $(window).scrollTop(),\n    'w.scrollLeft', $(window).scrollLeft(),\n  )\n\n\n  let top\n  let left\n  if (AJS.ios) {\n    const vpW = window.innerWidth\n    const vpH = window.innerHeight\n\n    log('vpH', vpH)\n    log('vpW', vpW)\n\n    top  = ((vpH -     myheight) / 2)  +  $(window).scrollTop()\n    left = ((vpW - this.width()) / 2)  +  $(window).scrollLeft()\n  } else {\n    top  = ($(window).height() - myheight) / 2\n    left = ($(window).width()  - this.width()) / 2\n  }\n\n  // for small viewports like iphone, when centering popups, ensure minimally +20px\n  top  = Math.max(20, top)\n  left = Math.max(20, left)\n\n  this.css({\n    position: (AJS.ios ? 'absolute' : 'fixed'),\n    display:  'block',\n    top,\n    left,\n  })\n\n  return this\n} // end $.fn.center\n\n\n$(() => {\n  // Use this global hack, by adding class 'accessible-link' to any mouse-only element div/img\n  AJS.makeMouseElementAccessible('.accessible-link')\n\n\n  AJS.setUpActionTracking() // Must be before other form submit handlers are assigned\n  AJS.nav_tophat_setup()\n  AJS.nav_tophat_wb_setup()\n\n  // UI component initialization\n  AJS.setupPopupLink()\n  AJS.setUpCreativeCommonsLicenseLink()\n  AJS.setUpSearchForms()\n  AJS.setUpBookReaderIframe()\n  AJS.setUpAccordions()\n  AJS.setUpRelatedItems()\n  setUpCopyableTexts()\n\n  /* global  archive_setup */\n  if (typeof archive_setup !== 'undefined') {\n    // when DOM loaded/stable, do some setup\n    $(() => {\n      for (const fn of archive_setup)\n        fn()\n    })\n  }\n\n  AJS.footer()\n})\n\n\n// promote to globals:\nwindow.AJS = AJS\nwindow.Timegraf = Timegraf\n","/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/scripts/index.js\":\n/*!******************************!*\\\n  !*** ./src/scripts/index.js ***!\n  \\******************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar IaDesignSystem = {};\n\n// Add components as keys in the IaDesignSystem object, for example:\n//    import MyComponent from 'components/MyComponent';\n//    IaDesignSystem.MyComponent = MyComponent;\n\nexports.default = IaDesignSystem;\n\n/***/ }),\n\n/***/ \"./src/styles/index.less\":\n/*!*******************************!*\\\n  !*** ./src/styles/index.less ***!\n  \\*******************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 0:\n/*!************************************************************!*\\\n  !*** multi ./src/scripts/index.js ./src/styles/index.less ***!\n  \\************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(/*! /Users/mitra/Library/Caches/Yarn/v4/.tmp/f85d5c6dbf48ced4703e8bc19ab1e947.5c04a7b880a402fa16e48933f5ca7327747203dc.prepare/src/scripts/index.js */\"./src/scripts/index.js\");\nmodule.exports = __webpack_require__(/*! /Users/mitra/Library/Caches/Yarn/v4/.tmp/f85d5c6dbf48ced4703e8bc19ab1e947.5c04a7b880a402fa16e48933f5ca7327747203dc.prepare/src/styles/index.less */\"./src/styles/index.less\");\n\n\n/***/ })\n\n/******/ });\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9pbmRleC5sZXNzIl0sIm5hbWVzIjpbIklhRGVzaWduU3lzdGVtIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBMEMsZ0NBQWdDO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0VBQXdELGtCQUFrQjtBQUMxRTtBQUNBLHlEQUFpRCxjQUFjO0FBQy9EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBeUMsaUNBQWlDO0FBQzFFLHdIQUFnSCxtQkFBbUIsRUFBRTtBQUNySTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOzs7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsRkEsSUFBTUEsaUJBQWlCLEVBQXZCOztBQUVBO0FBQ0E7QUFDQTs7a0JBRWVBLGM7Ozs7Ozs7Ozs7O0FDTmYseUMiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBJYURlc2lnblN5c3RlbSA9IHt9O1xuXG4vLyBBZGQgY29tcG9uZW50cyBhcyBrZXlzIGluIHRoZSBJYURlc2lnblN5c3RlbSBvYmplY3QsIGZvciBleGFtcGxlOlxuLy8gICAgaW1wb3J0IE15Q29tcG9uZW50IGZyb20gJ2NvbXBvbmVudHMvTXlDb21wb25lbnQnO1xuLy8gICAgSWFEZXNpZ25TeXN0ZW0uTXlDb21wb25lbnQgPSBNeUNvbXBvbmVudDtcblxuZXhwb3J0IGRlZmF1bHQgSWFEZXNpZ25TeXN0ZW07XG4iLCIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpbiJdLCJzb3VyY2VSb290IjoiIn0=","import ClipboardJS from 'clipboard'\n\n/**\n * Shows a message indicating the status of the copy operation\n *\n * Sets proper ARIA properties to ensure the status is read out by\n * accessible technologies\n *\n * @param {HTMLElement} copyableText\n * @param {String}      message\n */\nfunction showStatusMessage(copyableText, message) {\n  let output = copyableText.querySelector('output')\n\n  if (!output) {\n    output = document.createElement('output')\n    output.setAttribute('role', 'alert')\n    copyableText.appendChild(output)\n  }\n\n  // Empty it first to trigger accessibility technologies to read out the\n  // value even if it's the same as before\n  output.textContent = ''\n  output.textContent = message\n}\n\n/**\n * Creates a copy button with an event listener that triggers the\n * copy operation\n *\n * @param {HTMLElement} copyableText\n */\nfunction createButton(copyableText) {\n  const button = document.createElement('button')\n  button.type = 'button'\n  button.textContent = 'Copy'\n  button.title = 'Copy to clipboard'\n  button.setAttribute('data-clipboard-target', `#${copyableText.querySelector('input').id}`)\n\n  return button\n}\n\n/**\n * Sets up a specific copyable text component\n *\n * @param {HTMLElement} copyableText\n */\nfunction setUpCopyableText(copyableText) {\n  // No <input> to copy, abort\n  if (!copyableText.querySelector('input')) return\n\n  copyableText.appendChild(createButton(copyableText))\n\n  // Mark it as \"ready\" so we can avoid double-initializing\n  copyableText.setAttribute('data-copyable-text-ready', '')\n}\n\n/**\n * Initialize ClipboardJS behavior for all buttons and attach event listeners to show statuses\n */\nfunction setUpClipboardJS() {\n  const clipboard = new ClipboardJS('[data-copyable-text] [data-clipboard-target]')\n\n  clipboard.on('success', (event) => {\n    const copyableText = event.trigger.parentElement\n\n    const message = (\n      copyableText.getAttribute('data-copyable-text-success-message') ||\n      'Text copied to clipboard.'\n    )\n\n    showStatusMessage(copyableText, message)\n  })\n\n  clipboard.on('error', (event) => {\n    const copyableText = event.trigger.parentElement\n\n    const message = (\n      copyableText.getAttribute('data-copyable-text-error-message') ||\n      'Something went wrong.'\n    )\n\n    showStatusMessage(copyableText, message)\n  })\n}\n\n/**\n * Read-only text input component with a button to copy the text to the\n * user's clipboard\n *\n * Progressively enhances the input by generating the button and status\n * message entirely in the JavaScript.\n *\n * Currently only supports <input>s but it can be easily modified to support\n * <textarea>s in the future.\n *\n * @see copyable-text.less\n */\nfunction setUpCopyableTexts() {\n  const copyableTexts = document.querySelectorAll('[data-copyable-text]:not([data-copyable-text-ready])')\n\n  // No components found, abort\n  if (copyableTexts.length <= 0) return\n\n  // Browser cannot programmatically copy, abort\n  if (!ClipboardJS.isSupported()) return\n\n  // Turn into an array so we can use forEach()\n  [...copyableTexts].forEach(setUpCopyableText)\n  setUpClipboardJS()\n}\n\nexport default setUpCopyableTexts\n","/*!\n * clipboard.js v2.0.4\n * https://zenorocha.github.io/clipboard.js\n * \n * Licensed MIT  Zeno Rocha\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClipboardJS\"] = factory();\n\telse\n\t\troot[\"ClipboardJS\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _clipboardAction = __webpack_require__(1);\n\nvar _clipboardAction2 = _interopRequireDefault(_clipboardAction);\n\nvar _tinyEmitter = __webpack_require__(3);\n\nvar _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\n\nvar _goodListener = __webpack_require__(4);\n\nvar _goodListener2 = _interopRequireDefault(_goodListener);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Base class which takes one or more elements, adds event listeners to them,\n * and instantiates a new `ClipboardAction` on each click.\n */\nvar Clipboard = function (_Emitter) {\n    _inherits(Clipboard, _Emitter);\n\n    /**\n     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n     * @param {Object} options\n     */\n    function Clipboard(trigger, options) {\n        _classCallCheck(this, Clipboard);\n\n        var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\n\n        _this.resolveOptions(options);\n        _this.listenClick(trigger);\n        return _this;\n    }\n\n    /**\n     * Defines if attributes would be resolved using internal setter functions\n     * or custom functions that were passed in the constructor.\n     * @param {Object} options\n     */\n\n\n    _createClass(Clipboard, [{\n        key: 'resolveOptions',\n        value: function resolveOptions() {\n            var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n            this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n            this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n            this.container = _typeof(options.container) === 'object' ? options.container : document.body;\n        }\n\n        /**\n         * Adds a click event listener to the passed trigger.\n         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n         */\n\n    }, {\n        key: 'listenClick',\n        value: function listenClick(trigger) {\n            var _this2 = this;\n\n            this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {\n                return _this2.onClick(e);\n            });\n        }\n\n        /**\n         * Defines a new `ClipboardAction` on each click event.\n         * @param {Event} e\n         */\n\n    }, {\n        key: 'onClick',\n        value: function onClick(e) {\n            var trigger = e.delegateTarget || e.currentTarget;\n\n            if (this.clipboardAction) {\n                this.clipboardAction = null;\n            }\n\n            this.clipboardAction = new _clipboardAction2.default({\n                action: this.action(trigger),\n                target: this.target(trigger),\n                text: this.text(trigger),\n                container: this.container,\n                trigger: trigger,\n                emitter: this\n            });\n        }\n\n        /**\n         * Default `action` lookup function.\n         * @param {Element} trigger\n         */\n\n    }, {\n        key: 'defaultAction',\n        value: function defaultAction(trigger) {\n            return getAttributeValue('action', trigger);\n        }\n\n        /**\n         * Default `target` lookup function.\n         * @param {Element} trigger\n         */\n\n    }, {\n        key: 'defaultTarget',\n        value: function defaultTarget(trigger) {\n            var selector = getAttributeValue('target', trigger);\n\n            if (selector) {\n                return document.querySelector(selector);\n            }\n        }\n\n        /**\n         * Returns the support of the given action, or all actions if no action is\n         * given.\n         * @param {String} [action]\n         */\n\n    }, {\n        key: 'defaultText',\n\n\n        /**\n         * Default `text` lookup function.\n         * @param {Element} trigger\n         */\n        value: function defaultText(trigger) {\n            return getAttributeValue('text', trigger);\n        }\n\n        /**\n         * Destroy lifecycle.\n         */\n\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.listener.destroy();\n\n            if (this.clipboardAction) {\n                this.clipboardAction.destroy();\n                this.clipboardAction = null;\n            }\n        }\n    }], [{\n        key: 'isSupported',\n        value: function isSupported() {\n            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n\n            var actions = typeof action === 'string' ? [action] : action;\n            var support = !!document.queryCommandSupported;\n\n            actions.forEach(function (action) {\n                support = support && !!document.queryCommandSupported(action);\n            });\n\n            return support;\n        }\n    }]);\n\n    return Clipboard;\n}(_tinyEmitter2.default);\n\n/**\n * Helper function to retrieve attribute value.\n * @param {String} suffix\n * @param {Element} element\n */\n\n\nfunction getAttributeValue(suffix, element) {\n    var attribute = 'data-clipboard-' + suffix;\n\n    if (!element.hasAttribute(attribute)) {\n        return;\n    }\n\n    return element.getAttribute(attribute);\n}\n\nmodule.exports = Clipboard;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _select = __webpack_require__(2);\n\nvar _select2 = _interopRequireDefault(_select);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Inner class which performs selection from either `text` or `target`\n * properties and then executes copy or cut operations.\n */\nvar ClipboardAction = function () {\n    /**\n     * @param {Object} options\n     */\n    function ClipboardAction(options) {\n        _classCallCheck(this, ClipboardAction);\n\n        this.resolveOptions(options);\n        this.initSelection();\n    }\n\n    /**\n     * Defines base properties passed from constructor.\n     * @param {Object} options\n     */\n\n\n    _createClass(ClipboardAction, [{\n        key: 'resolveOptions',\n        value: function resolveOptions() {\n            var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            this.action = options.action;\n            this.container = options.container;\n            this.emitter = options.emitter;\n            this.target = options.target;\n            this.text = options.text;\n            this.trigger = options.trigger;\n\n            this.selectedText = '';\n        }\n\n        /**\n         * Decides which selection strategy is going to be applied based\n         * on the existence of `text` and `target` properties.\n         */\n\n    }, {\n        key: 'initSelection',\n        value: function initSelection() {\n            if (this.text) {\n                this.selectFake();\n            } else if (this.target) {\n                this.selectTarget();\n            }\n        }\n\n        /**\n         * Creates a fake textarea element, sets its value from `text` property,\n         * and makes a selection on it.\n         */\n\n    }, {\n        key: 'selectFake',\n        value: function selectFake() {\n            var _this = this;\n\n            var isRTL = document.documentElement.getAttribute('dir') == 'rtl';\n\n            this.removeFake();\n\n            this.fakeHandlerCallback = function () {\n                return _this.removeFake();\n            };\n            this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;\n\n            this.fakeElem = document.createElement('textarea');\n            // Prevent zooming on iOS\n            this.fakeElem.style.fontSize = '12pt';\n            // Reset box model\n            this.fakeElem.style.border = '0';\n            this.fakeElem.style.padding = '0';\n            this.fakeElem.style.margin = '0';\n            // Move element out of screen horizontally\n            this.fakeElem.style.position = 'absolute';\n            this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';\n            // Move element to the same position vertically\n            var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n            this.fakeElem.style.top = yPosition + 'px';\n\n            this.fakeElem.setAttribute('readonly', '');\n            this.fakeElem.value = this.text;\n\n            this.container.appendChild(this.fakeElem);\n\n            this.selectedText = (0, _select2.default)(this.fakeElem);\n            this.copyText();\n        }\n\n        /**\n         * Only removes the fake element after another click event, that way\n         * a user can hit `Ctrl+C` to copy because selection still exists.\n         */\n\n    }, {\n        key: 'removeFake',\n        value: function removeFake() {\n            if (this.fakeHandler) {\n                this.container.removeEventListener('click', this.fakeHandlerCallback);\n                this.fakeHandler = null;\n                this.fakeHandlerCallback = null;\n            }\n\n            if (this.fakeElem) {\n                this.container.removeChild(this.fakeElem);\n                this.fakeElem = null;\n            }\n        }\n\n        /**\n         * Selects the content from element passed on `target` property.\n         */\n\n    }, {\n        key: 'selectTarget',\n        value: function selectTarget() {\n            this.selectedText = (0, _select2.default)(this.target);\n            this.copyText();\n        }\n\n        /**\n         * Executes the copy operation based on the current selection.\n         */\n\n    }, {\n        key: 'copyText',\n        value: function copyText() {\n            var succeeded = void 0;\n\n            try {\n                succeeded = document.execCommand(this.action);\n            } catch (err) {\n                succeeded = false;\n            }\n\n            this.handleResult(succeeded);\n        }\n\n        /**\n         * Fires an event based on the copy operation result.\n         * @param {Boolean} succeeded\n         */\n\n    }, {\n        key: 'handleResult',\n        value: function handleResult(succeeded) {\n            this.emitter.emit(succeeded ? 'success' : 'error', {\n                action: this.action,\n                text: this.selectedText,\n                trigger: this.trigger,\n                clearSelection: this.clearSelection.bind(this)\n            });\n        }\n\n        /**\n         * Moves focus away from `target` and back to the trigger, removes current selection.\n         */\n\n    }, {\n        key: 'clearSelection',\n        value: function clearSelection() {\n            if (this.trigger) {\n                this.trigger.focus();\n            }\n\n            window.getSelection().removeAllRanges();\n        }\n\n        /**\n         * Sets the `action` to be performed which can be either 'copy' or 'cut'.\n         * @param {String} action\n         */\n\n    }, {\n        key: 'destroy',\n\n\n        /**\n         * Destroy lifecycle.\n         */\n        value: function destroy() {\n            this.removeFake();\n        }\n    }, {\n        key: 'action',\n        set: function set() {\n            var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';\n\n            this._action = action;\n\n            if (this._action !== 'copy' && this._action !== 'cut') {\n                throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n            }\n        }\n\n        /**\n         * Gets the `action` property.\n         * @return {String}\n         */\n        ,\n        get: function get() {\n            return this._action;\n        }\n\n        /**\n         * Sets the `target` property using an element\n         * that will be have its content copied.\n         * @param {Element} target\n         */\n\n    }, {\n        key: 'target',\n        set: function set(target) {\n            if (target !== undefined) {\n                if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {\n                    if (this.action === 'copy' && target.hasAttribute('disabled')) {\n                        throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n                    }\n\n                    if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n                        throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n                    }\n\n                    this._target = target;\n                } else {\n                    throw new Error('Invalid \"target\" value, use a valid Element');\n                }\n            }\n        }\n\n        /**\n         * Gets the `target` property.\n         * @return {String|HTMLElement}\n         */\n        ,\n        get: function get() {\n            return this._target;\n        }\n    }]);\n\n    return ClipboardAction;\n}();\n\nmodule.exports = ClipboardAction;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nfunction select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar is = __webpack_require__(5);\nvar delegate = __webpack_require__(6);\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar closest = __webpack_require__(7);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ })\n/******/ ]);\n});","module.exports = __webpack_public_path__ + \"archive.min.css\";"],"sourceRoot":""}